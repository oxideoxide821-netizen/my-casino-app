<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forest Farm Clicker</title>
    <style>
        body { background: #1a1a1a; margin: 0; overflow: hidden; font-family: 'Arial', sans-serif; }
        
        /* –ó–∞–≥–æ–Ω (–§–µ—Ä–º–∞) */
        #farm { 
            width: 100vw; height: 100vh; background: #388e3c; 
            position: relative; overflow: hidden; border: 15px solid #5d4037; box-sizing: border-box; 
        }

        /* –ñ–∏–≤–æ—Ç–Ω—ã–µ */
        .animal-wrap { position: absolute; width: 64px; height: 64px; overflow: hidden; cursor: pointer; transition: all 1.8s linear; }
        .sprite { height: 100%; display: block; animation: walk-anim 0.6s steps(6) infinite; }
        @keyframes walk-anim { from { transform: translateX(0); } to { transform: translateX(-100%); } }

        /* –¢–∏–ø—ã –∂–∏–≤–æ—Ç–Ω—ã—Ö */
        .big { transform: scale(2.5); z-index: 10; } /* –ë–æ–ª—å—à–∏–µ –¥–∞—é—Ç –±–æ–ª—å—à–µ –¥–µ–Ω–µ–≥ */
        .bomb { filter: brightness(0.2) sepia(1) hue-rotate(-50deg) saturate(5); } /* –°–≤–∏–Ω—å—è-–±–æ–º–±–∞ (—á–µ—Ä–Ω–∞—è/–∫—Ä–∞—Å–Ω–∞—è) */
        .dead { transform: scale(0) rotate(360deg) !important; transition: 0.3s !important; }

        /* UI –∏ –¢–∞–π–º–µ—Ä */
        #ui { position: fixed; top: 20px; width: 100%; text-align: center; z-index: 100; color: gold; font-size: 30px; font-weight: bold; text-shadow: 2px 2px 5px #000; }
        #overlay { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.85); display: flex; flex-direction: column; 
            justify-content: center; align-items: center; z-index: 200; color: white; 
        }
        #countdown { font-size: 80px; color: #ffeb3b; margin-bottom: 20px; }
        button { padding: 20px 50px; font-size: 25px; cursor: pointer; background: #ff9800; border: none; border-radius: 15px; color: white; box-shadow: 0 8px 0 #e68a00; }
        button:active { transform: translateY(4px); box-shadow: 0 4px 0 #e68a00; }
    </style>
</head>
<body>

    <div id="ui">üí∞: <span id="score">0</span> | ‚è≥: <span id="timer">5</span>—Å</div>

    <div id="overlay">
        <h1 id="msg">–ó–ê–ì–û–ù –ó–ê–ö–†–´–¢</h1>
        <div id="countdown"></div>
        <button id="startBtn" onclick="prepareFarm()">–û–¢–ö–†–´–¢–¨ –ó–ê–ì–û–ù</button>
    </div>

    <div id="farm"></div>

<script>
    let score = 0;
    let gameActive = false;
    const farm = document.getElementById('farm');

    // –¢–≤–æ–∏ —Ñ–∞–π–ª—ã (–ø—Ä–æ–≤–µ—Ä—å Fox_walk.png ‚Äî –Ω–∞ —Å–∫—Ä–∏–Ω–µ –º–∞–ª–µ–Ω—å–∫–∞—è "w")
    const animalFiles = ['Boar_Walk.png', 'Deer_Walk.png', 'Fox_walk.png', 'Hare_Walk.png'];

    function prepareFarm() {
        document.getElementById('startBtn').style.display = 'none';
        let count = 5;
        const countInterval = setInterval(() => {
            document.getElementById('countdown').innerText = count;
            count--;
            if (count < 0) {
                clearInterval(countInterval);
                document.getElementById('overlay').style.display = 'none';
                document.getElementById('countdown').innerText = "";
                startGame();
            }
        }, 1000);
    }

    function spawn() {
        if (!gameActive) return;
        const wrap = document.createElement('div');
        const sprite = document.createElement('img');
        const chance = Math.random();
        
        sprite.src = animalFiles[Math.floor(Math.random() * animalFiles.length)];
        sprite.className = 'sprite';
        wrap.className = 'animal-wrap';

        // –†–∞–Ω–¥–æ–º–Ω—ã–π —Ç–∏–ø
        if (chance < 0.2) { // –ë–û–ú–ë–ê
            wrap.className += ' bomb'; wrap.dataset.type = 'bomb';
        } else if (chance < 0.4) { // –ë–û–õ–¨–®–ê–Ø (—Ö2.5 —Ä–∞–∑–º–µ—Ä)
            wrap.className += ' big'; wrap.dataset.pts = 100;
        } else { // –û–ë–´–ß–ù–ê–Ø
            wrap.dataset.pts = 20;
        }

        wrap.style.left = Math.random() * 80 + 'vw';
        wrap.style.top = Math.random() * 80 + 'vh';

        wrap.onclick = function() {
            if (this.dataset.type === 'bomb') {
                gameActive = false;
                alert("üí• –ë–ê–ë–ê–•! –í—ã –≤–∑–æ—Ä–≤–∞–ª–∏—Å—å –Ω–∞ —Å–≤–∏–Ω—å–µ-–±–æ–º–±–µ!");
                location.reload();
            } else {
                score += parseInt(this.dataset.pts || 20);
                document.getElementById('score').innerText = score;
                this.className += ' dead';
                setTimeout(() => this.remove(), 300);
            }
        };

        farm.appendChild(wrap);
        // –ê–Ω–∏–º–∞—Ü–∏—è –±–µ–≥–∞
        setTimeout(() => { if (wrap) { wrap.style.left = Math.random() * 85 + 'vw'; wrap.style.top = Math.random() * 85 + 'vh'; } }, 100);
        setTimeout(() => { if(wrap) wrap.remove(); }, 2000);
    }

    function startGame() {
        score = 0;
        gameActive = true;
        let gameTime = 5; // –í—Ä–µ–º—è —Ä–∞—É–Ω–¥–∞ 5 —Å–µ–∫—É–Ω–¥
        document.getElementById('timer').innerText = gameTime;

        const spawner = setInterval(spawn, 400);
        const timer = setInterval(() => {
            gameTime--;
            document.getElementById('timer').innerText = gameTime;
            if (gameTime <= 0) {
                clearInterval(spawner);
                clearInterval(timer);
                gameActive = false;
                document.getElementById('overlay').style.display = 'flex';
                document.getElementById('msg').innerText = "–†–ê–£–ù–î –û–ö–û–ù–ß–ï–ù! –í–´–†–£–ß–ö–ê: " + score;
                document.getElementById('startBtn').style.display = 'block';
            }
        }, 1000);
    }
</script>
</body>
</html>
