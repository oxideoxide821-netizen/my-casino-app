<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–õ–µ—Å–Ω–∞—è –§–µ—Ä–º–∞</title>
    <style>
        body { background: #1a1a1a; margin: 0; overflow: hidden; font-family: Arial, sans-serif; }
        #farm { 
            width: 100vw; height: 100vh; background: #4caf50; 
            position: relative; overflow: hidden; border: 15px solid #5d4037; box-sizing: border-box; 
        }
        
        /* –û–∫–Ω–æ –¥–ª—è –æ–¥–Ω–æ–≥–æ –∫–∞–±–∞–Ω—á–∏–∫–∞ */
        .animal-wrap { 
            position: absolute; 
            width: 48px; height: 48px; /* –†–∞–∑–º–µ—Ä –æ–¥–Ω–æ–≥–æ –∫–∞–¥—Ä–∞ –∏–∑ —Ç–≤–æ–µ–≥–æ —Ñ–∞–π–ª–∞ */
            overflow: hidden; cursor: pointer; 
            transition: all 1.8s linear; z-index: 5;
        }

        /* –¢–≤–æ—è –∫–∞—Ä—Ç–∏–Ω–∫–∞ 6x4 –≤–Ω—É—Ç—Ä–∏ –æ–∫–Ω–∞ */
        .sprite {
            width: 288px; /* 48px * 6 –∫–∞–¥—Ä–æ–≤ –≤ —à–∏—Ä–∏–Ω—É */
            height: 192px; /* 48px * 4 —Ä—è–¥–∞ –≤ –≤—ã—Å–æ—Ç—É */
            display: block;
            animation: walk-anim 0.6s steps(6) infinite;
        }

        @keyframes walk-anim {
            from { transform: translate(0, 0); }
            to { transform: translate(-100%, 0); }
        }

        .big { transform: scale(2.5); z-index: 10; } 
        .bomb { filter: brightness(0.2) sepia(1) hue-rotate(-50deg) saturate(5); } 
        .collected { transform: scale(0) translateY(-100px) !important; opacity: 0; transition: 0.4s !important; }

        #ui { position: fixed; top: 20px; width: 100%; text-align: center; z-index: 100; color: gold; font-size: 28px; text-shadow: 2px 2px 4px #000; font-weight: bold; }
        #overlay { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.85); display: flex; flex-direction: column; 
            justify-content: center; align-items: center; z-index: 200; color: white; 
        }
        #countdown { font-size: 100px; color: #ffeb3b; margin: 20px; }
        button { padding: 20px 50px; font-size: 24px; cursor: pointer; background: #ff9800; border: none; border-radius: 15px; color: white; box-shadow: 0 6px 0 #e68a00; }
    </style>
</head>
<body>
    <div id="ui">üí∞ –°—á—ë—Ç: <span id="score">0</span> | ‚è≥ –í—Ä–µ–º—è: <span id="timer">5</span>—Å</div>
    <div id="overlay">
        <h1 id="msg">–ó–ê–ì–û–ù –ó–ê–ö–†–´–¢</h1>
        <div id="countdown"></div>
        <button id="startBtn" onclick="prepareFarm()">–û–¢–ö–†–´–¢–¨ –ó–ê–ì–û–ù</button>
    </div>
    <div id="farm"></div>

<script>
    let score = 0;
    let gameActive = false;
    const farm = document.getElementById('farm');

    // –¢–≤–æ–∏ —Ñ–∞–π–ª—ã (—è –æ—Å—Ç–∞–≤–∏–ª —Ç–æ–ª—å–∫–æ —Ç–µ, —á—Ç–æ –Ω–∞ –ì–∏—Ç—Ö–∞–±–µ)
    const animalFiles = ['Boar_Walk.png', 'Deer_Walk.png', 'Fox_walk.png', 'Hare_Walk.png', 'Black_grouse_Walk.png'];

    function prepareFarm() {
        document.getElementById('startBtn').style.display = 'none';
        let count = 5;
        const countInt = setInterval(() => {
            document.getElementById('countdown').innerText = count;
            count--;
            if (count < 0) {
                clearInterval(countInt);
                document.getElementById('overlay').style.display = 'none';
                document.getElementById('countdown').innerText = "";
                startGame();
            }
        }, 1000);
    }

    function spawn() {
        if (!gameActive) return;
        const wrap = document.createElement('div');
        const sprite = document.createElement('img');
        const chance = Math.random();
        
        sprite.src = animalFiles[Math.floor(Math.random() * animalFiles.length)];
        sprite.className = 'sprite';
        wrap.className = 'animal-wrap';
        wrap.style.left = Math.random() * 80 + 'vw';
        wrap.style.top = Math.random() * 80 + 'vh';

        // –†–∞–Ω–¥–æ–º–Ω—ã–π —Ä—è–¥ (—É —Ç–µ–±—è –∏—Ö 4 –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ)
        const row = Math.floor(Math.random() * 4) * -48;
        sprite.style.marginTop = row + 'px';

        if (chance < 0.2) { 
            wrap.className += ' bomb'; wrap.dataset.type = 'bomb';
        } else if (chance < 0.4) { 
            wrap.className += ' big'; wrap.dataset.pts = 100;
        } else { 
            wrap.dataset.pts = 20;
        }

        wrap.onclick = function() {
            if (this.dataset.type === 'bomb') {
                gameActive = false;
                alert("üí• –ë–ê–ë–ê–•! –ó–∞–≥–æ–Ω –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è.");
                location.reload();
            } else {
                score += parseInt(this.dataset.pts || 20);
                document.getElementById('score').innerText = score;
                this.className += ' collected';
                setTimeout(() => this.remove(), 400);
            }
        };

        farm.appendChild(wrap);
        setTimeout(() => { if (wrap) { wrap.style.left = Math.random() * 80 + 'vw'; wrap.style.top = Math.random() * 80 + 'vh'; } }, 100);
        setTimeout(() => { if(wrap) wrap.remove(); }, 2000);
    }

    function startGame() {
        score = 0; document.getElementById('score').innerText = "0";
        gameActive = true;
        let timeLeft = 5;
        const spawner = setInterval(spawn, 400);
        const timer = setInterval(() => {
            timeLeft--;
            document.getElementById('timer').innerText = timeLeft;
            if (timeLeft <= 0) {
                clearInterval(spawner); clearInterval(timer);
                gameActive = false;
                document.getElementById('overlay').style.display = 'flex';
                document.getElementById('msg').innerText = "–°–û–ë–†–ê–ù–û –ù–ê: " + score;
                document.getElementById('startBtn').style.display = 'block';
            }
        }, 1000);
    }
</script>
</body>
</html>
