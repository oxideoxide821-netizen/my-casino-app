<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PULSE @Ebrimm_bot</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { 
            --bg: #050505; 
            --card: #121212; 
            --primary: #0088cc; 
            --green: #00ff88; 
            --red: #ff3333; 
            --gold: #f7931a;
            --text: #e0e0e0; 
        }
        
        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
            -webkit-tap-highlight-color: transparent;
        }
        
        html {
            overflow-x: hidden;
            max-width: 100vw;
        }
        
        body { 
            font-family: -apple-system, system-ui, sans-serif; 
            background: var(--bg); 
            color: var(--text); 
            margin: 0; 
            padding: 15px;
            padding-bottom: 90px;
            overflow-x: hidden;
            max-width: 100vw;
            min-height: 100vh;
        }

        .glow-bg {
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at 50% 50%, rgba(247,147,26,0.06) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
            animation: pulse-glow 10s ease-in-out infinite;
        }
        
        @keyframes pulse-glow {
            0%, 100% { opacity: 0.4; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.15); }
        }

        /* –ë–∏—Ç–∫–æ–∏–Ω */
        .bitcoin-wrapper {
            width: 80px;
            height: 80px;
            margin: 10px auto 25px;
            position: relative;
            z-index: 1;
        }
        
        .bitcoin-coin {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            animation: coinFlip 4s infinite ease-in-out;
        }
        
        @keyframes coinFlip {
            0% { transform: rotateY(0deg) rotateX(5deg); }
            25% { transform: rotateY(90deg) rotateX(-5deg); }
            50% { transform: rotateY(180deg) rotateX(5deg); }
            75% { transform: rotateY(270deg) rotateX(-5deg); }
            100% { transform: rotateY(360deg) rotateX(5deg); }
        }
        
        .coin-side {
            position: absolute;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            backface-visibility: hidden;
        }
        
        .coin-front {
            background: linear-gradient(135deg, #ff9500 0%, #ffb700 50%, #ff9500 100%);
            transform: translateZ(4px);
            display: flex;
            align-items: center;
            justify-content: center;
            border: 4px solid #fff;
            box-shadow: 
                0 0 40px rgba(255, 149, 0, 0.6),
                inset 0 0 30px rgba(255,255,255,0.4),
                0 10px 30px rgba(0,0,0,0.4);
        }
        
        .coin-back {
            background: linear-gradient(135deg, #e8850a 0%, #ffa500 50%, #e8850a 100%);
            transform: translateZ(-4px) rotateY(180deg);
            display: flex;
            align-items: center;
            justify-content: center;
            border: 4px solid #fff;
            box-shadow: 
                0 0 40px rgba(232, 133, 10, 0.6),
                inset 0 0 30px rgba(255,255,255,0.3),
                0 10px 30px rgba(0,0,0,0.4);
        }
        
        .coin-edge {
            position: absolute;
            width: 80px;
            height: 8px;
            background: linear-gradient(90deg, #d47600, #ff9500, #d47600);
            top: 36px;
            left: 0;
            transform: rotateX(90deg);
            border-radius: 4px;
        }
        
        .bitcoin-symbol {
            font-size: 2.5em;
            font-weight: 900;
            color: white;
            text-shadow: 0 3px 6px rgba(0,0,0,0.4);
        }
        
        .coin-shine {
            position: absolute;
            top: 10%;
            left: 10%;
            width: 30%;
            height: 20%;
            background: linear-gradient(135deg, rgba(255,255,255,0.8) 0%, transparent 100%);
            border-radius: 50%;
            transform: rotate(-45deg);
        }

        /* –®–∞–ø–∫–∞ */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding: 0 5px;
            position: relative;
            z-index: 1;
            max-width: 100%;
        }
        
        .logo { 
            font-size: 1.4em; 
            font-weight: 900; 
            display: flex; 
            align-items: center; 
            gap: 10px;
            background: linear-gradient(90deg, #fff, var(--gold), #fff);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: shine 3s linear infinite;
        }
        
        @keyframes shine { to { background-position: 200% center; } }
        
        .header-btns { display: flex; gap: 10px; }
        
        .icon-btn {
            width: 42px;
            height: 42px;
            border-radius: 12px;
            background: #1a1a1a;
            border: 1px solid #333;
            color: #888;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.1em;
            flex-shrink: 0;
        }
        
        .icon-btn:hover { 
            color: var(--gold); 
            border-color: var(--gold);
            background: #222;
        }
        .icon-btn:active { transform: scale(0.92); }

        .card { 
            background: #161616;
            border-radius: 24px; 
            padding: 22px; 
            text-align: center; 
            border: 1px solid #2a2a2a; 
            box-shadow: 0 15px 35px rgba(0,0,0,0.6);
            margin-bottom: 18px; 
            position: relative;
            z-index: 1;
            max-width: 100%;
        }

        .balance-box { 
            font-size: 0.85em; 
            color: #666; 
            margin-bottom: 10px; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .balance-amount {
            font-size: 2.4em;
            font-weight: 900;
            color: var(--gold);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            text-shadow: 0 0 25px rgba(247,147,26,0.3);
        }

        .add-btn {
            background: #1a1a1a;
            border: 1px solid #444;
            color: #999;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75em;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.2s;
        }
        
        .add-btn:hover { 
            background: rgba(247,147,26,0.2);
            color: var(--gold); 
            border-color: var(--gold);
        }
        .add-btn:active { transform: scale(0.95); }

        .price { 
            font-size: 3em; 
            font-weight: 900; 
            margin: 15px 0; 
            font-variant-numeric: tabular-nums; 
            transition: all 0.3s;
        }
        
        .price.up { 
            color: var(--green); 
            text-shadow: 0 0 25px rgba(0,255,136,0.5);
        } 
        .price.down { 
            color: var(--red); 
            text-shadow: 0 0 25px rgba(255,51,51,0.5);
        }

        .timer-box {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #2a2a2a;
        }
        
        .timer-display {
            font-family: 'Courier New', monospace;
            font-size: 1.5em;
            font-weight: 900;
            color: var(--primary);
            text-shadow: 0 0 15px rgba(0,136,204,0.4);
        }
        
        .timer-bar {
            width: 100px;
            height: 4px;
            background: #222;
            border-radius: 2px;
            overflow: hidden;
        }
        
        .timer-progress {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--green));
            border-radius: 2px;
            transition: width 1s linear;
        }

        .amount-selector {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            overflow-x: auto;
            padding-bottom: 5px;
            scrollbar-width: none;
            max-width: 100%;
        }
        
        .amount-selector::-webkit-scrollbar { display: none; }
        
        .amount-btn {
            padding: 10px 16px;
            border: 2px solid #2a2a2a;
            background: #1a1a1a;
            color: #777;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 800;
            font-size: 0.85em;
            transition: all 0.2s ease;
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 6px;
            flex-shrink: 0;
        }
        
        .amount-btn:hover { 
            border-color: #444; 
            color: #aaa;
        }
        .amount-btn:active { transform: scale(0.96); }
        
        .amount-btn.active { 
            background: rgba(247,147,26,0.2);
            border-color: var(--gold); 
            color: var(--gold);
            box-shadow: 0 0 20px rgba(247,147,26,0.3);
        }

        .btn-group { 
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            gap: 15px; 
            margin-top: 15px; 
            max-width: 100%;
        }
        
        .bet-btn { 
            border: none; 
            border-radius: 18px; 
            padding: 20px 16px; 
            font-size: 1.1em; 
            font-weight: 900; 
            cursor: pointer; 
            color: white; 
            transition: transform 0.15s ease, box-shadow 0.2s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            position: relative;
            overflow: hidden;
            min-width: 0;
        }

        .btn-up { 
            background: linear-gradient(145deg, #00c853, #00ff88);
            color: #000; 
            box-shadow: 0 8px 25px rgba(0,200,83,0.35);
        }
        
        .btn-up:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(0,255,136,0.45);
        }
        
        .btn-up:active { 
            transform: translateY(-1px) scale(0.98);
        }
        
        .btn-up:disabled { 
            opacity: 0.35; 
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none;
        }

        .btn-down { 
            background: linear-gradient(145deg, #d50000, #ff5252);
            box-shadow: 0 8px 25px rgba(213,0,0,0.35);
        }
        
        .btn-down:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(255,82,82,0.45);
        }
        
        .btn-down:active { 
            transform: translateY(-1px) scale(0.98);
        }
        
        .btn-down:disabled { 
            opacity: 0.35; 
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none;
        }
        
        .btn-icon { font-size: 1.4em; }
        .btn-sub { font-size: 0.7em; opacity: 0.9; font-weight: 700; }

        .btn-share { 
            background: #1a1a1a;
            width: 100%; 
            margin-top: 15px; 
            border: 2px solid #333; 
            color: #888;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 0.95em;
            font-weight: 700;
            padding: 16px;
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.2s ease;
            max-width: 100%;
        }
        
        .btn-share:hover { 
            border-color: var(--primary);
            color: var(--primary);
            background: #222;
        }
        .btn-share:active { transform: scale(0.98); }

        .section-title { 
            font-size: 0.75em; 
            color: #555; 
            text-transform: uppercase; 
            letter-spacing: 2px; 
            margin: 20px 0 10px 5px; 
            display: flex; 
            justify-content: space-between; 
            align-items: center;
            font-weight: 700;
            max-width: 100%;
        }
        
        .chat-box { 
            background: #0a0a0a; 
            border-radius: 20px; 
            padding: 18px; 
            height: 150px; 
            overflow-y: auto; 
            border: 1px solid #2a2a2a; 
            display: flex; 
            flex-direction: column-reverse;
            max-width: 100%;
        }
        
        .msg { 
            font-size: 0.9em; 
            margin-bottom: 8px; 
            line-height: 1.4; 
            border-bottom: 1px solid #1a1a1a; 
            padding-bottom: 6px; 
            display: flex;
            align-items: flex-start;
            gap: 8px;
            animation: fadeIn 0.3s ease;
            max-width: 100%;
            word-break: break-word;
        }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateX(-10px); } to { opacity: 1; transform: translateX(0); } }
        
        .msg-avatar {
            width: 26px;
            height: 26px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--green));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75em;
            font-weight: 900;
            flex-shrink: 0;
        }
        
        .input-area { 
            display: flex; 
            gap: 10px; 
            margin-top: 12px; 
            max-width: 100%;
        }
        
        input { 
            flex: 1; 
            background: #1a1a1a;
            border: 2px solid #2a2a2a; 
            color: #fff; 
            padding: 14px; 
            border-radius: 14px; 
            outline: none;
            font-size: 0.95em;
            transition: border-color 0.2s;
            min-width: 0;
        }
        
        input:focus { border-color: var(--primary); }

        .feed { 
            display: flex; 
            flex-direction: column; 
            gap: 8px; 
            padding-bottom: 10px;
            max-width: 100%;
        }
        
        .bet-item { 
            background: #161616;
            padding: 14px 18px; 
            border-radius: 16px; 
            display: flex; 
            justify-content: space-between; 
            align-items: center;
            font-size: 0.9em; 
            border-left: 4px solid #333; 
            animation: slideIn 0.4s ease;
            border: 1px solid #222;
            border-left-width: 4px;
            max-width: 100%;
        }
        
        @keyframes slideIn { from { opacity: 0; transform: translateX(30px); } to { opacity: 1; transform: translateX(0); } }

        /* –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(18,18,18,0.98);
            backdrop-filter: blur(20px);
            border-top: 1px solid #2a2a2a;
            padding: 10px 20px 20px;
            display: flex;
            justify-content: space-around;
            z-index: 1000;
            max-width: 100vw;
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            color: #555;
            font-size: 0.65em;
            font-weight: 700;
            transition: all 0.2s ease;
            padding: 8px 16px;
            border-radius: 16px;
            cursor: pointer;
        }
        
        .nav-item i { font-size: 1.4em; margin-bottom: 3px; }
        .nav-item:hover { color: #888; }
        .nav-item.active { 
            color: var(--gold); 
            background: rgba(247,147,26,0.15);
        }
        .nav-item:active { transform: scale(0.9); }

        /* –≠–∫—Ä–∞–Ω—ã */
        .screen { 
            display: none;
            max-width: 100%;
        }
        .screen.active { 
            display: block;
            animation: fadeScreen 0.3s ease;
        }
        @keyframes fadeScreen { from { opacity: 0; } to { opacity: 1; } }

        .back-btn {
            background: #1a1a1a;
            border: 2px solid #333;
            color: #888;
            padding: 12px 20px;
            border-radius: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            margin-top: 10px;
            font-weight: 700;
            transition: all 0.2s;
            max-width: 100%;
        }
        
        .back-btn:hover { border-color: var(--gold); color: var(--gold); }
        .back-btn:active { transform: scale(0.97); }

        .profile-header {
            text-align: center;
            padding: 20px;
            max-width: 100%;
        }
        
        .profile-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            margin: 0 auto 15px;
            border: 3px solid var(--gold);
            box-shadow: 0 0 30px rgba(247,147,26,0.3);
        }

        /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            backdrop-filter: blur(15px);
            z-index: 2000;
            align-items: flex-start;
            justify-content: center;
            padding: 20px;
            padding-top: 80px;
            overflow-y: auto;
            max-width: 100vw;
        }
        
        .modal-content {
            background: #1a1a1a;
            border-radius: 28px;
            padding: 30px;
            width: 100%;
            max-width: 400px;
            border: 1px solid #333;
            margin-bottom: 50px;
            max-width: calc(100vw - 40px);
        }

        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 18px 0;
            border-bottom: 1px solid #2a2a2a;
        }
        
        .toggle {
            width: 52px;
            height: 30px;
            background: #222;
            border-radius: 15px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s;
            flex-shrink: 0;
        }
        
        .toggle.active { background: var(--gold); }
        
        .toggle::after {
            content: '';
            position: absolute;
            width: 26px;
            height: 26px;
            background: white;
            border-radius: 50%;
            top: 2px; left: 2px;
            transition: all 0.3s ease;
        }
        
        .toggle.active::after { left: 24px; }

        .result-emoji { font-size: 4em; text-align: center; margin-bottom: 20px; animation: bounce 1.5s infinite; }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }
        
        .result-text { text-align: center; font-size: 1.8em; font-weight: 900; margin-bottom: 10px; }
        .result-win { color: var(--green); text-shadow: 0 0 20px rgba(0,255,136,0.4); }
        .result-lose { color: var(--red); text-shadow: 0 0 20px rgba(255,51,51,0.4); }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            pointer-events: none;
            z-index: 3000;
            border-radius: 50%;
        }
        
        @keyframes confetti-fall {
            0% { transform: translateY(-100px) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }
    </style>
</head>
<body>

    <div class="glow-bg"></div>

    <!-- –≠–ö–†–ê–ù –ò–ì–†–´ -->
    <div id="screen-game" class="screen active">
        <div class="header">
            <div class="logo">
                <i class="fas fa-bolt"></i>
                <span>PULSE</span>
            </div>
            <div class="header-btns">
                <button class="icon-btn" onclick="openSettings()">
                    <i class="fas fa-cog"></i>
                </button>
                <button class="icon-btn" onclick="openStats()">
                    <i class="fas fa-chart-line"></i>
                </button>
            </div>
        </div>

        <div class="bitcoin-wrapper">
            <div class="bitcoin-coin">
                <div class="coin-side coin-front">
                    <div class="coin-shine"></div>
                    <span class="bitcoin-symbol">‚Çø</span>
                </div>
                <div class="coin-side coin-back">
                    <div class="coin-shine"></div>
                    <span class="bitcoin-symbol">‚Çø</span>
                </div>
                <div class="coin-edge"></div>
            </div>
        </div>

        <div class="card">
            <div class="balance-box">
                <i class="fab fa-bitcoin" style="color: var(--gold);"></i>
                <span>–¢–í–û–ô –°–ß–ï–¢</span>
                <button class="add-btn" onclick="addBalance()">
                    <i class="fas fa-plus"></i>
                    <span>–ü–æ–ø–æ–ª–Ω–∏—Ç—å</span>
                </button>
            </div>
            <div class="balance-amount">
                <span id="user-balance">0.00000</span>
                <i class="fab fa-bitcoin" style="font-size: 0.5em;"></i>
            </div>
        </div>

        <div class="card">
            <div style="display: flex; justify-content: center; align-items: center; gap: 10px; margin-bottom: 12px;">
                <div style="width: 10px; height: 10px; background: var(--green); border-radius: 50%; animation: pulse 2s infinite;"></div>
                <span style="font-size: 0.85em; color: #666; font-weight: 800;">BTC / USDT</span>
            </div>
            <div id="btc-price" class="price">$0.00</div>
            
            <div class="timer-box">
                <i class="fas fa-clock" style="color: #555;"></i>
                <div class="timer-bar">
                    <div class="timer-progress" id="timer-progress" style="width: 100%"></div>
                </div>
                <div class="timer-display" id="timer">60</div>
            </div>
        </div>

        <div class="amount-selector">
            <button class="amount-btn active" onclick="setAmount(0.001)">
                <i class="fab fa-bitcoin"></i> 0.001
            </button>
            <button class="amount-btn" onclick="setAmount(0.005)">
                <i class="fab fa-bitcoin"></i> 0.005
            </button>
            <button class="amount-btn" onclick="setAmount(0.01)">
                <i class="fab fa-bitcoin"></i> 0.01
            </button>
            <button class="amount-btn" onclick="setAmount(0.05)">
                <i class="fab fa-bitcoin"></i> 0.05
            </button>
        </div>

        <div class="btn-group">
            <button class="bet-btn btn-up" onclick="makeBet('UP')" id="btn-up">
                <span class="btn-icon"><i class="fas fa-arrow-trend-up"></i></span>
                <span>LONG</span>
                <span class="btn-sub">x2.5 –ø—Ä–∏–±—ã–ª—å</span>
            </button>
            <button class="bet-btn btn-down" onclick="makeBet('DOWN')" id="btn-down">
                <span class="btn-icon"><i class="fas fa-arrow-trend-down"></i></span>
                <span>SHORT</span>
                <span class="btn-sub">x2.5 –ø—Ä–∏–±—ã–ª—å</span>
            </button>
        </div>

        <button class="btn-share" onclick="shareApp()">
            <i class="fas fa-user-plus"></i>
            <span>–ü–†–ò–ì–õ–ê–°–ò–¢–¨ –î–†–£–ì–ê +0.001 BTC</span>
        </button>

        <div class="section-title">
            <span><i class="fas fa-comments" style="color: var(--primary);"></i> –ß–ê–¢ –¢–†–ï–ô–î–ï–†–û–í</span>
            <span id="chat-count" style="color: #666;">12 –æ–Ω–ª–∞–π–Ω</span>
        </div>
        <div class="card" style="padding: 15px;">
            <div id="chat-box" class="chat-box"></div>
            <div class="input-area">
                <input type="text" id="chat-input" placeholder="–ù–∞–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ..." maxlength="100">
                <button onclick="sendMsg()" style="background: var(--primary); padding: 14px 20px; border-radius: 14px; border: none; color: white; cursor: pointer; transition: transform 0.1s;">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>

        <div class="section-title">
            <span><i class="fas fa-fire" style="color: var(--gold);"></i> –ñ–ò–í–´–ï –°–¢–ê–í–ö–ò</span>
            <span id="status" style="color: var(--green);">‚óè ONLINE</span>
        </div>
        <div id="live-feed" class="feed"></div>
    </div>

    <!-- –≠–ö–†–ê–ù –ü–†–û–§–ò–õ–Ø -->
    <div id="screen-profile" class="screen">
        <button class="back-btn" onclick="switchTab('game')">
            <i class="fas fa-arrow-left"></i>
            <span>–ù–∞–∑–∞–¥</span>
        </button>
        <div class="profile-header">
            <img id="profile-avatar" class="profile-avatar" src="" alt="Avatar">
            <div style="font-size: 1.5em; font-weight: 900;" id="profile-name">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            <div style="color: #666;" id="profile-username">@username</div>
        </div>
        <div class="card">
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; text-align: center;">
                <div>
                    <div style="font-size: 1.8em; font-weight: 900; color: var(--gold);" id="stat-games">0</div>
                    <div style="font-size: 0.75em; color: #666; margin-top: 5px;">–ò–≥—Ä—ã</div>
                </div>
                <div>
                    <div style="font-size: 1.8em; font-weight: 900; color: var(--gold);" id="stat-wins">0</div>
                    <div style="font-size: 0.75em; color: #666; margin-top: 5px;">–ü–æ–±–µ–¥—ã</div>
                </div>
                <div>
                    <div style="font-size: 1.8em; font-weight: 900; color: var(--gold);" id="stat-profit">0</div>
                    <div style="font-size: 0.75em; color: #666; margin-top: 5px;">–ü—Ä–æ—Ñ–∏—Ç</div>
                </div>
            </div>
        </div>
    </div>

    <!-- –≠–ö–†–ê–ù –¢–û–ü–ê -->
    <div id="screen-rating" class="screen">
        <button class="back-btn" onclick="switchTab('game')">
            <i class="fas fa-arrow-left"></i>
            <span>–ù–∞–∑–∞–¥</span>
        </button>
        <div style="text-align: center; margin-bottom: 25px;">
            <div style="font-size: 1.6em; font-weight: 900;">
                <i class="fas fa-trophy" style="color: var(--gold);"></i> –¢–û–ü –¢–†–ï–ô–î–ï–†–û–í
            </div>
        </div>
        <div id="top-list" class="feed"></div>
    </div>

    <!-- –≠–ö–†–ê–ù –î–†–£–ó–ï–ô -->
    <div id="screen-friends" class="screen">
        <button class="back-btn" onclick="switchTab('game')">
            <i class="fas fa-arrow-left"></i>
            <span>–ù–∞–∑–∞–¥</span>
        </button>
        <div style="text-align: center; margin-bottom: 25px;">
            <div style="font-size: 1.6em; font-weight: 900;">
                <i class="fas fa-users" style="color: var(--primary);"></i> –î–†–£–ó–¨–Ø
            </div>
        </div>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px;">
            <button class="btn-share" onclick="inviteFriend()" style="margin-top: 0;">
                <i class="fas fa-user-plus"></i>
                <span>–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å</span>
            </button>
            <button class="btn-share" onclick="copyLink()" style="margin-top: 0;">
                <i class="fas fa-link"></i>
                <span>–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</span>
            </button>
        </div>
        <div id="friends-list" class="feed"></div>
    </div>

    <!-- –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
    <div class="bottom-nav">
        <div class="nav-item active" onclick="switchTab('game', this)">
            <i class="fas fa-gamepad"></i>
            <span>–ò–≥—Ä–∞</span>
        </div>
        <div class="nav-item" onclick="switchTab('rating', this)">
            <i class="fas fa-trophy"></i>
            <span>–¢–æ–ø</span>
        </div>
        <div class="nav-item" onclick="switchTab('friends', this)">
            <i class="fas fa-users"></i>
            <span>–î—Ä—É–∑—å—è</span>
        </div>
        <div class="nav-item" onclick="switchTab('profile', this)">
            <i class="fas fa-user"></i>
            <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª–∫–∏ -->
    <div class="modal" id="settings-modal">
        <div class="modal-content">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                <div style="font-size: 1.3em; font-weight: 900;">
                    <i class="fas fa-cog" style="color: var(--gold);"></i> –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                </div>
                <button class="icon-btn" onclick="closeModal('settings-modal')" style="width: 35px; height: 35px;">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="setting-item">
                <div style="display: flex; align-items: center; gap: 12px;">
                    <i class="fas fa-vibrate" style="color: var(--gold);"></i>
                    <div>
                        <div style="font-weight: 700;">–í–∏–±—Ä–∞—Ü–∏—è</div>
                        <div style="font-size: 0.8em; color: #666;">–¢–∞–∫—Ç–∏–ª—å–Ω—ã–π –æ—Ç–∫–ª–∏–∫</div>
                    </div>
                </div>
                <div class="toggle active" id="toggle-vibro" onclick="toggleSetting('vibro')"></div>
            </div>
            <div class="setting-item">
                <div style="display: flex; align-items: center; gap: 12px;">
                    <i class="fas fa-volume-up" style="color: var(--gold);"></i>
                    <div>
                        <div style="font-weight: 700;">–ó–≤—É–∫–∏</div>
                        <div style="font-size: 0.8em; color: #666;">–ó–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã</div>
                    </div>
                </div>
                <div class="toggle active" id="toggle-sound" onclick="toggleSetting('sound')"></div>
            </div>
        </div>
    </div>

    <div class="modal" id="result-modal">
        <div class="modal-content">
            <div class="result-emoji" id="result-emoji">üöÄ</div>
            <div class="result-text" id="result-text">–ü–û–ë–ï–î–ê!</div>
            <div style="background: #111; border-radius: 20px; padding: 25px; margin: 25px 0; text-align: center; border: 2px solid #333;">
                <div id="result-amount" style="font-size: 2.5em; font-weight: 900; margin-bottom: 8px;">+0.00250 BTC</div>
                <div style="color: #666; font-size: 0.9em;">–¢–≤–æ–π –≤—ã–∏–≥—Ä—ã—à</div>
            </div>
            <button onclick="shareResult()" style="width: 100%; padding: 18px; background: linear-gradient(145deg, var(--primary), #00a8ff); border: none; border-radius: 18px; color: white; font-weight: 900; font-size: 1.1em; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 15px;">
                <i class="fab fa-telegram"></i>
                <span>–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</span>
            </button>
            <button class="icon-btn" onclick="closeModal('result-modal')" style="margin: 0 auto; display: block; width: 50px; height: 50px;">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.enableClosingConfirmation();
        tg.ready();

        const user = tg.initDataUnsafe.user || { id: 0, first_name: "–ì–æ—Å—Ç—å", last_name: "", username: "guest", language_code: "ru", is_premium: false, photo_url: null };
        let balance = parseFloat(localStorage.getItem('pulse_btc_balance')) || 0.01;
        let currentPrice = 0, lastPrice = 0, timeLeft = 60, userBet = null, betAmount = 0.001;
        let settings = JSON.parse(localStorage.getItem('pulse_settings')) || { vibro: true, sound: true };
        let stats = JSON.parse(localStorage.getItem('pulse_stats')) || { games: 0, wins: 0, profit: 0 };
        let friends = JSON.parse(localStorage.getItem('pulse_friends')) || [];

        updateBalanceUI();
        initSettings();
        loadProfile();
        loadTop();
        loadFriends();

        async function getPrice() {
            try {
                const res = await fetch('https://api.binance.com/api/v3/ticker/price?symbol=BTCUSDT');
                const data = await res.json();
                currentPrice = parseFloat(data.price);
                const el = document.getElementById('btc-price');
                if (currentPrice > lastPrice) el.className = 'price up';
                else if (currentPrice < lastPrice) el.className = 'price down';
                el.innerText = '$' + currentPrice.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
                lastPrice = currentPrice;
                setTimeout(() => el.className = 'price', 500);
            } catch (e) { console.error("Price error:", e); }
        }
        
        setInterval(getPrice, 1500);
        getPrice();

        setInterval(() => {
            if (timeLeft > 0) { timeLeft--; updateTimer(); }
            else { if (userBet) checkResult(); resetRound(); }
        }, 1000);

        function updateTimer() {
            document.getElementById('timer').innerText = timeLeft;
            const progress = (timeLeft / 60) * 100;
            document.getElementById('timer-progress').style.width = progress + '%';
        }

        function resetRound() { timeLeft = 60; userBet = null; document.getElementById('btn-up').disabled = false; document.getElementById('btn-down').disabled = false; updateTimer(); }

        function setAmount(amount) {
            betAmount = amount;
            document.querySelectorAll('.amount-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.innerText.includes(amount.toString())) btn.classList.add('active');
            });
            vibrate('light');
        }

        function makeBet(side) {
            if (userBet) return;
            if (balance < betAmount) { tg.showAlert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ BTC!'); return; }
            balance -= betAmount;
            updateBalanceUI();
            userBet = { side, entry: currentPrice, amount: betAmount, time: Date.now() };
            document.getElementById('btn-up').disabled = side === 'DOWN';
            document.getElementById('btn-down').disabled = side === 'UP';
            vibrate('medium');
            addBetToFeed(user.first_name, side, betAmount, true);
        }

        function checkResult() {
            if (!userBet) return;
            const win = (userBet.side === 'UP' && currentPrice > userBet.entry) || (userBet.side === 'DOWN' && currentPrice < userBet.entry);
            const profit = win ? userBet.amount * 1.5 : -userBet.amount;
            if (win) {
                balance += userBet.amount * 2.5;
                stats.wins++;
                stats.profit += userBet.amount * 1.5;
                showResult(true, profit);
                createConfetti();
            } else {
                showResult(false, profit);
            }
            stats.games++;
            saveStats();
            updateBalanceUI();
            updateProfileStats();
            loadTop();
            document.getElementById('btn-up').disabled = false;
            document.getElementById('btn-down').disabled = false;
        }

        function saveStats() { localStorage.setItem('pulse_stats', JSON.stringify(stats)); }

        function showResult(win, amount) {
            const modal = document.getElementById('result-modal');
            const emoji = document.getElementById('result-emoji');
            const text = document.getElementById('result-text');
            const amt = document.getElementById('result-amount');
            if (win) {
                emoji.innerText = 'üöÄ';
                text.innerText = '–ü–û–ë–ï–î–ê!';
                text.className = 'result-text result-win';
                amt.innerText = '+' + Math.abs(amount).toFixed(5) + ' BTC';
                amt.style.color = 'var(--green)';
                vibrate('success');
            } else {
                emoji.innerText = 'üí∏';
                text.innerText = '–ü–û–†–ê–ñ–ï–ù–ò–ï';
                text.className = 'result-text result-lose';
                amt.innerText = amount.toFixed(5) + ' BTC';
                amt.style.color = 'var(--red)';
                vibrate('error');
            }
            modal.style.display = 'flex';
            setTimeout(() => closeModal('result-modal'), 4000);
        }

        function sendMsg() {
            const input = document.getElementById('chat-input');
            const text = input.value.trim();
            if (!text) return;
            addMsgToChat(user.first_name, text, true);
            input.value = '';
            vibrate('light');
        }

        document.getElementById('chat-input').addEventListener('keypress', (e) => { if (e.key === 'Enter') sendMsg(); });

        function addMsgToChat(name, text, isYou) {
            const box = document.getElementById('chat-box');
            const msg = document.createElement('div');
            msg.className = 'msg';
            const initial = name.charAt(0).toUpperCase();
            const color = isYou ? 'var(--gold)' : 'var(--primary)';
            msg.innerHTML = `<div class="msg-avatar" style="background: ${color};">${initial}</div><div class="msg-content"><b style="color: ${color};">${name}:</b> ${text}</div>`;
            box.prepend(msg);
            if (box.children.length > 20) box.lastChild.remove();
        }

        function addBetToFeed(name, side, amount, isYou) {
            const feed = document.getElementById('live-feed');
            const item = document.createElement('div');
            item.className = 'bet-item';
            item.style.borderLeftColor = side === 'UP' ? 'var(--green)' : 'var(--red)';
            const initial = name.charAt(0).toUpperCase();
            const time = new Date().toLocaleTimeString('ru', { hour: '2-digit', minute: '2-digit' });
            item.innerHTML = `<div style="display: flex; align-items: center; gap: 12px;"><div style="${isYou ? 'box-shadow: 0 0 15px var(--gold);' : ''} width: 38px; height: 38px; border-radius: 50%; background: linear-gradient(135deg, var(--gold), #f5af19); display: flex; align-items: center; justify-content: center; font-weight: 900; color: white;">${initial}</div><div style="display: flex; flex-direction: column;"><div style="font-weight: 700; font-size: 0.95em;">${name} ${isYou ? '<span style="color: var(--gold); font-size: 0.8em;">(–í—ã)</span>' : ''}</div><div style="font-size: 0.8em; color: #666;">${time} ‚Ä¢ ${amount.toFixed(5)} BTC</div></div></div><div style="font-weight: 900; display: flex; align-items: center; gap: 6px; color: ${side === 'UP' ? 'var(--green)' : 'var(--red)'};"><i class="fas fa-arrow-${side === 'UP' ? 'up' : 'down'}"></i>${side === 'UP' ? 'LONG' : 'SHORT'}</div>`;
            feed.prepend(item);
            if (feed.children.length > 6) feed.lastChild.remove();
        }

        const botNames = ['Whale', 'CryptoKing', 'Satoshi', 'MoonBoy', 'TraderPro', 'Diamond'];
        setInterval(() => {
            if (Math.random() > 0.6) {
                const name = botNames[Math.floor(Math.random() * botNames.length)];
                const side = Math.random() > 0.5 ? 'UP' : 'DOWN';
                const amount = [0.001, 0.005, 0.01][Math.floor(Math.random() * 3)];
                addBetToFeed(name, side, amount, false);
                const online = 100 + Math.floor(Math.random() * 80);
                document.getElementById('status').innerHTML = `‚óè ONLINE ${online}`;
                document.getElementById('chat-count').innerText = online + ' –æ–Ω–ª–∞–π–Ω';
            }
        }, 4000);

        function switchTab(tab, el) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById('screen-' + tab).classList.add('active');
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            if (el) el.classList.add('active');
            vibrate('light');
            window.scrollTo(0, 0);
            if (tab === 'profile') {
                loadProfile();
                updateProfileStats();
            } else if (tab === 'rating') {
                loadTop();
            } else if (tab === 'friends') {
                loadFriends();
            }
        }

        function loadProfile() {
            const avatarEl = document.getElementById('profile-avatar');
            if (user.photo_url) avatarEl.src = user.photo_url;
            else {
                const canvas = document.createElement('canvas');
                canvas.width = 200; canvas.height = 200;
                const ctx = canvas.getContext('2d');
                const gradient = ctx.createLinearGradient(0, 0, 200, 200);
                gradient.addColorStop(0, '#f7931a');
                gradient.addColorStop(1, '#f5af19');
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, 200, 200);
                ctx.fillStyle = 'white';
                ctx.font = 'bold 80px sans-serif';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(user.first_name.charAt(0).toUpperCase(), 100, 100);
                avatarEl.src = canvas.toDataURL();
            }
            document.getElementById('profile-name').innerText = user.first_name + (user.last_name ? ' ' + user.last_name : '');
            document.getElementById('profile-username').innerText = user.username ? '@' + user.username : '–ù–µ—Ç username';
        }

        function updateProfileStats() {
            document.getElementById('stat-games').innerText = stats.games;
            document.getElementById('stat-wins').innerText = stats.wins;
            document.getElementById('stat-profit').innerText = stats.profit.toFixed(5);
        }

        function loadTop() {
            const topData = [
                { name: 'Whale', profit: 0.523, avatar: 'W' },
                { name: 'CryptoKing', profit: 0.389, avatar: 'C' },
                { name: user.first_name, profit: stats.profit, avatar: user.first_name.charAt(0), isYou: true },
                { name: 'Satoshi', profit: 0.156, avatar: 'S' },
                { name: 'MoonBoy', profit: 0.089, avatar: 'M' }
            ].sort((a, b) => b.profit - a.profit);

            const list = document.getElementById('top-list');
            list.innerHTML = topData.map((item, index) => {
                let rankColor = '#666';
                let rankBg = '#222';
                if (index === 0) { rankColor = '#000'; rankBg = 'linear-gradient(135deg, #ffd700, #ffaa00)'; }
                else if (index === 1) { rankColor = '#000'; rankBg = 'linear-gradient(135deg, #c0c0c0, #808080)'; }
                else if (index === 2) { rankColor = '#fff'; rankBg = 'linear-gradient(135deg, #cd7f32, #8b4513)'; }
                
                const isYou = item.isYou ? 'style="border: 2px solid var(--gold);"' : '';
                
                return `
                    <div class="bet-item" ${isYou}>
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="width: 35px; height: 35px; border-radius: 50%; background: ${rankBg}; display: flex; align-items: center; justify-content: center; font-weight: 900; color: ${rankColor};">${index + 1}</div>
                            <div style="width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, var(--primary), var(--green)); display: flex; align-items: center; justify-content: center; font-weight: 900; color: white;">${item.avatar}</div>
                            <div>
                                <div style="font-weight: 700;">${item.name} ${item.isYou ? '<span style="color: var(--gold); font-size: 0.8em;">(–í—ã)</span>' : ''}</div>
                                <div style="color: var(--green); font-size: 0.85em; font-weight: 700;">+${item.profit.toFixed(5)} BTC</div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function loadFriends() {
            const list = document.getElementById('friends-list');
            if (friends.length === 0) {
                list.innerHTML = `
                    <div style="text-align: center; color: #666; padding: 40px;">
                        <i class="fas fa-user-friends" style="font-size: 3em; margin-bottom: 15px; display: block; color: #444;"></i>
                        <div style="font-size: 1.1em; margin-bottom: 8px;">–ü–æ–∫–∞ –Ω–µ—Ç –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω—ã—Ö</div>
                        <div style="font-size: 0.9em;">–ü–æ–ª—É—á–∞–π 0.001 BTC –∑–∞ –∫–∞–∂–¥–æ–≥–æ –¥—Ä—É–≥–∞!</div>
                    </div>
                `;
                return;
            }

            list.innerHTML = friends.map(f => `
                <div class="bet-item">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <div style="width: 45px; height: 45px; border-radius: 50%; background: linear-gradient(135deg, var(--primary), var(--green)); display: flex; align-items: center; justify-content: center; font-weight: 900; font-size: 1.1em; color: white;">${f.name.charAt(0)}</div>
                        <div>
                            <div style="font-weight: 700; font-size: 1.05em;">${f.name}</div>
                            <div style="color: var(--green); font-size: 0.85em;"><i class="fas fa-check-circle" style="font-size: 0.8em;"></i> –ê–∫—Ç–∏–≤–µ–Ω</div>
                        </div>
                    </div>
                    <div style="background: rgba(0,255,136,0.15); color: var(--green); padding: 8px 14px; border-radius: 20px; font-size: 0.85em; font-weight: 800;">+0.001 BTC</div>
                </div>
            `).join('');
        }

        function inviteFriend() {
            const text = `üí∞ –ó–∞—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º BTC –≤ PULSE! –ú–æ–π —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥: ${user.id}`;
            tg.openTelegramLink(`https://t.me/share/url?url=${encodeURIComponent('https://t.me/Ebrimm_bot')}&text=${encodeURIComponent(text)}`);
        }

        function copyLink() {
            const link = `https://t.me/Ebrimm_bot?start=${user.id}`;
            if (navigator.clipboard) {
                navigator.clipboard.writeText(link);
                tg.showAlert('–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!');
            } else {
                tg.showAlert(link);
            }
        }

        function openSettings() { 
            document.getElementById('settings-modal').style.display = 'flex'; 
            vibrate('light'); 
        }
        
        function closeModal(id) { 
            document.getElementById(id).style.display = 'none'; 
        }
        
        function toggleSetting(key) { 
            settings[key] = !settings[key]; 
            localStorage.setItem('pulse_settings', JSON.stringify(settings)); 
            document.getElementById('toggle-' + key).classList.toggle('active'); 
            vibrate('medium'); 
        }
        
        function initSettings() { 
            if (!settings.vibro) document.getElementById('toggle-vibro').classList.remove('active'); 
            if (!settings.sound) document.getElementById('toggle-sound').classList.remove('active'); 
        }
        
        function openStats() { 
            tg.showAlert(`üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:\n–ò–≥—Ä: ${stats.games}\n–ü–æ–±–µ–¥: ${stats.wins}\n–ü—Ä–æ–∏–≥—Ä—ã—à–µ–π: ${stats.games - stats.wins}\n–ü—Ä–æ—Ñ–∏—Ç: +${stats.profit.toFixed(5)} BTC\nWinrate: ${stats.games > 0 ? Math.round(stats.wins/stats.games*100) : 0}%`); 
        }

        function vibrate(type) {
            if (!settings.vibro) return;
            if (tg.HapticFeedback) {
                if (type === 'success') tg.HapticFeedback.notificationOccurred('success');
                else if (type === 'error') tg.HapticFeedback.notificationOccurred('error');
                else tg.HapticFeedback.impactOccurred(type === 'heavy' ? 'heavy' : type === 'medium' ? 'medium' : 'light');
            } else if (navigator.vibrate) {
                const patterns = { light: 10, medium: [50, 50], heavy: [100, 50, 100], success: [50, 100, 50], error: [200, 100, 200] };
                navigator.vibrate(patterns[type] || 50);
            }
        }

        function createConfetti() {
            const colors = ['#f7931a', '#00ff88', '#0088cc', '#ffd700', '#ff4757'];
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animation = `confetti-fall ${2 + Math.random() * 2}s ease-out forwards`;
                document.body.appendChild(confetti);
                setTimeout(() => confetti.remove(), 4000);
            }
        }

        function addBalance() {
            tg.showConfirm('–ü–æ–ª—É—á–∏—Ç—å 0.001 BTC –∑–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∫–ª–∞–º—ã?', (ok) => {
                if (ok) { balance += 0.001; updateBalanceUI(); tg.showAlert('+0.001 BTC –∑–∞—á–∏—Å–ª–µ–Ω–æ!'); vibrate('success'); }
            });
        }

        function shareApp() {
            const text = `üí∞ –ü–æ–¥–Ω–∏–º–∞—é BTC –Ω–∞ –∫—É—Ä—Å–µ –±–∏—Ç–∫–∞ –≤ PULSE! –î–∞—é—Ç –±–æ–Ω—É—Å 0.001 BTC:`;
            tg.openTelegramLink(`https://t.me/share/url?url=${encodeURIComponent('https://t.me/Ebrimm_bot')}&text=${encodeURIComponent(text)}`);
        }

        function shareResult() {
            const text = stats.profit > 0 ? `üöÄ –Ø –∑–∞—Ä–∞–±–æ—Ç–∞–ª ${stats.profit.toFixed(5)} BTC –≤ PULSE! –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Å—è:` : `üìâ –ü–æ–ø—Ä–æ–±—É—é –æ—Ç—ã–≥—Ä–∞—Ç—å—Å—è –≤ PULSE!`;
            tg.openTelegramLink(`https://t.me/share/url?url=${encodeURIComponent('https://t.me/Ebrimm_bot')}&text=${encodeURIComponent(text)}`);
        }

        function updateBalanceUI() { 
            localStorage.setItem('pulse_btc_balance', balance); 
            document.getElementById('user-balance').innerText = balance.toFixed(5); 
        }

        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', (e) => { if (e.target === modal) modal.style.display = 'none'; });
        });

        addBetToFeed('Whale', 'UP', 0.05, false);
        addMsgToChat('System', '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ PULSE! üöÄ', false);
    </script>
</body>
</html>
