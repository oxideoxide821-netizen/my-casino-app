<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Ultimate 2D Farm</title>
    <style>
        :root { --neon: #00ff88; --gold: #ffcc00; --bg: #0d130d; }
        body { 
            margin: 0; background: var(--bg); color: white; 
            font-family: 'Segoe UI', sans-serif; overflow: hidden;
            background-image: radial-gradient(circle at 50% 50%, #1a2e1a 0%, #0d130d 100%);
        }

        /* GUI –í–µ—Ä—Ö */
        #header { 
            padding: 20px; background: rgba(0,0,0,0.8); backdrop-filter: blur(10px); 
            border-bottom: 2px solid var(--neon); text-align: center;
        }
        .balance { font-size: 38px; font-weight: 900; color: var(--gold); }

        /* –°–ï–¢–ö–ê –ó–ê–ì–û–ù–û–í */
        #field {
            display: grid; grid-template-columns: 1fr 1fr; gap: 15px;
            padding: 20px; height: 65vh; overflow-y: auto; scrollbar-width: none;
        }

        .plot {
            background: rgba(255,255,255,0.05); border-radius: 30px; height: 180px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            position: relative; border: 1px solid rgba(255,255,255,0.1); transition: 0.3s;
        }

        .locked { background: rgba(0,0,0,0.5); filter: grayscale(1); opacity: 0.5; border: 2px dashed #444; }

        /* –û–ñ–ò–í–õ–Ø–ï–ú –ú–û–î–ï–õ–¨–ö–£ (CSS Sprite Animation) */
        .sprite-viewport {
            width: 48px; height: 48px; /* –†–∞–∑–º–µ—Ä –æ–¥–Ω–æ–≥–æ –∫–∞–¥—Ä–∞ */
            overflow: hidden; position: relative;
            transform: scale(3); /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ø–∏–∫—Å–µ–ª—å-–∞—Ä—Ç */
            image-rendering: pixelated; /* –°–æ—Ö—Ä–∞–Ω—è–µ–º —á–µ—Ç–∫–æ—Å—Ç—å 2D */
        }

        .sprite-sheet {
            position: absolute; left: 0; top: 0; height: 48px;
            /* –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ 6 –∫–∞–¥—Ä–æ–≤ –∑–∞ 0.8 —Å–µ–∫ */
            animation: walk-cycle 0.8s steps(6) infinite;
        }

        @keyframes walk-cycle {
            from { transform: translateX(0); }
            to { transform: translateX(-288px); } /* 48px * 6 –∫–∞–¥—Ä–æ–≤ = 288px */
        }

        /* –¢–µ–Ω—å –ø–æ–¥ –∂–∏–≤–æ—Ç–Ω—ã–º */
        .shadow { width: 45px; height: 8px; background: rgba(0,0,0,0.4); border-radius: 50%; margin-top: 45px; filter: blur(2px); }

        /* –ú–∞–≥–∞–∑–∏–Ω */
        .shop-bar {
            position: fixed; bottom: 0; width: 100%; background: #111; 
            padding: 20px; border-radius: 30px 30px 0 0; display: flex; gap: 10px; box-sizing: border-box;
            border-top: 2px solid var(--neon);
        }
        .btn {
            flex: 1; background: var(--neon); color: #000; border: none; 
            padding: 15px; border-radius: 15px; font-weight: 900; box-shadow: 0 5px 15px rgba(0,255,136,0.3);
        }
    </style>
</head>
<body>

<div id="header">
    <div class="balance">üí∞ <span id="money">0</span></div>
    <div style="color:var(--neon); font-size:12px; margin-top:5px; font-weight:bold;">–§–ï–†–ú–ê –£–†–û–í–ù–Ø: <span id="lvl">1</span></div>
</div>

<div id="field"></div>

<div class="shop-bar">
    <button class="btn" onclick="buyPlot()">–ö–£–ü–ò–¢–¨ –ó–ê–ì–û–ù <br> <span id="price">500</span> üí∞</button>
</div>

<script>
    let money = parseInt(localStorage.getItem('f_m')) || 0;
    let unlocked = parseInt(localStorage.getItem('f_u')) || 1;

    function render() {
        const field = document.getElementById('field');
        field.innerHTML = '';
        for (let i = 1; i <= 8; i++) {
            const plot = document.createElement('div');
            if (i <= unlocked) {
                plot.className = 'plot';
                plot.innerHTML = `
                    <div class="sprite-viewport">
                        <img src="${i}.gif" class="sprite-sheet">
                    </div>
                    <div class="shadow"></div>
                `;
                plot.onclick = (e) => { 
                    money += (unlocked * 15); 
                    createVfx(e);
                    update(); 
                };
            } else {
                plot.className = 'plot locked';
                plot.innerHTML = `<div style="font-size:30px">üîí</div><div style="font-size:10px; font-weight:bold;">–ó–ê–ë–õ–û–ö–ò–†–û–í–ê–ù–û</div>`;
                plot.onclick = () => buyPlot();
            }
            field.appendChild(plot);
        }
        update();
    }

    function createVfx(e) {
        const v = document.createElement('div');
        v.style.cssText = `position:fixed; left:${e.clientX}px; top:${e.clientY}px; color:var(--neon); font-weight:900; pointer-events:none; z-index:2000; animation:moveUp 0.6s forwards;`;
        v.innerText = "+" + (unlocked * 15);
        document.body.appendChild(v);
        setTimeout(() => v.remove(), 600);
    }

    function buyPlot() {
        let cost = unlocked * 500;
        if (money >= cost && unlocked < 8) {
            money -= cost;
            unlocked++;
            render();
        }
    }

    function update() {
        document.getElementById('money').innerText = Math.floor(money);
        document.getElementById('lvl').innerText = unlocked;
        document.getElementById('price').innerText = unlocked * 500;
        localStorage.setItem('f_m', money);
        localStorage.setItem('f_u', unlocked);
    }

    // CSS –ê–Ω–∏–º–∞—Ü–∏—è –≤—ã–ª–µ—Ç–∞ —Ü–∏—Ñ—Ä
    const style = document.createElement('style');
    style.innerHTML = "@keyframes moveUp { 0%{opacity:1; transform:translateY(0);} 100%{opacity:0; transform:translateY(-100px);} }";
    document.head.appendChild(style);

    setInterval(() => { money += (unlocked * 1); update(); }, 1000);
    render();
</script>
</body>
</html>
