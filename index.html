<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ü•í CUCUMBER KOMBAT PRO MAX</title>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Black+Ops+One&family=Montserrat:wght@400;700;900&display=swap');
        
        :root { 
            --green: #00ff41; 
            --neon: #39ff14; 
            --bg: #0a0a0f; 
            --card: #161b22;
            --gold: #ffd700;
            --purple: #ff00ff;
            --cyan: #00ffff;
            --red: #ff0040;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body { 
            background: radial-gradient(ellipse at top, #1a3d1a 0%, var(--bg) 50%, #000 100%);
            color: white; 
            font-family: 'Montserrat', sans-serif;
            height: 100vh; 
            overflow: hidden;
        }

        .bg-glow {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(0,255,65,0.1) 0%, transparent 40%),
                radial-gradient(circle at 80% 20%, rgba(255,0,255,0.1) 0%, transparent 40%);
            pointer-events: none;
            z-index: 0;
        }

        .header { 
            padding: 15px; 
            text-align: center; 
            background: linear-gradient(180deg, rgba(0,0,0,0.9) 0%, transparent 100%);
            position: relative;
            z-index: 10;
        }
        
        .league { 
            color: var(--gold); 
            font-size: 12px; 
            font-weight: 900; 
            letter-spacing: 3px; 
            text-transform: uppercase;
            text-shadow: 0 0 20px var(--gold);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }
        
        .balance-container { 
            font-size: 52px; 
            font-weight: 900; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            gap: 10px;
            text-shadow: 0 0 30px var(--green);
            font-family: 'Black Ops One', cursive;
            margin-top: 5px;
        }
        
        .profit-val { 
            color: var(--neon); 
            font-size: 13px; 
            margin-top: 8px;
            font-weight: 700;
        }

        .game-area { 
            flex-grow: 1; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            height: calc(100vh - 220px);
            position: relative;
        }
        
        .main-cucumber {
            width: 280px; 
            height: 280px; 
            font-size: 220px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            filter: drop-shadow(0 0 40px var(--green));
            animation: breathe 2.5s ease-in-out infinite;
            transition: transform 0.05s;
            position: relative;
            z-index: 5;
        }
        
        @keyframes breathe {
            0%, 100% { transform: scale(1) rotate(-3deg) translateY(0); }
            50% { transform: scale(1.03) rotate(3deg) translateY(-10px); }
        }
        
        .main-cucumber.tap {
            animation: tapShake 0.1s !important;
        }
        
        @keyframes tapShake {
            0% { transform: scale(0.88) rotate(0deg); }
            50% { transform: scale(0.82) rotate(-8deg); }
            100% { transform: scale(0.88) rotate(0deg); }
        }

        .combo {
            position: fixed;
            top: 28%; 
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 120px;
            font-weight: 900;
            pointer-events: none;
            z-index: 60;
            opacity: 0;
            font-family: 'Black Ops One', cursive;
            letter-spacing: -8px;
            -webkit-text-stroke: 3px rgba(255,255,255,0.3);
        }
        
        .combo.show { 
            opacity: 1; 
            animation: megaCombo 0.7s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        @keyframes megaCombo {
            0% { 
                transform: translate(-50%, -50%) scale(0) rotate(-1080deg); 
                filter: blur(30px) brightness(10);
                text-shadow: 0 0 200px currentColor;
            }
            40% { 
                transform: translate(-50%, -50%) scale(1.6) rotate(30deg); 
                filter: blur(0) brightness(3);
            }
            60% { 
                transform: translate(-50%, -50%) scale(0.7) rotate(-15deg); 
            }
            80% { 
                transform: translate(-50%, -50%) scale(1.15) rotate(8deg); 
            }
            100% { 
                transform: translate(-50%, -50%) scale(1) rotate(0deg); 
            }
        }

        .combo.x1 { color: var(--green); text-shadow: 0 0 20px var(--green), 0 0 40px var(--green); }
        .combo.x5 { color: var(--cyan); text-shadow: 0 0 20px var(--cyan), 0 0 60px var(--cyan); }
        .combo.x10 { color: var(--purple); text-shadow: 0 0 20px var(--purple), 0 0 80px var(--purple), 0 0 120px var(--purple); }
        .combo.x25 { color: var(--gold); text-shadow: 0 0 20px var(--gold), 0 0 100px var(--gold), 0 0 200px #ff8c00; animation: megaCombo 0.7s, goldPulse 0.3s infinite alternate; }
        .combo.x50 { color: #ff0040; text-shadow: 0 0 30px #ff0040, 0 0 100px #ff0040, 0 0 200px #ff0000, 0 0 300px #ff0000; animation: megaCombo 0.7s, redPulse 0.2s infinite alternate; }
        .combo.x100 { 
            background: linear-gradient(45deg, #ff0000, #ff8000, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: none;
            filter: drop-shadow(0 0 50px rgba(255,255,255,0.8));
            animation: megaCombo 0.7s, rainbow 0.5s infinite linear;
        }
        
        @keyframes goldPulse { from { filter: brightness(1) drop-shadow(0 0 50px var(--gold)); } to { filter: brightness(2) drop-shadow(0 0 100px var(--gold)); } }
        @keyframes redPulse { from { filter: brightness(1); } to { filter: brightness(2); } }
        @keyframes rainbow { from { filter: hue-rotate(0deg) drop-shadow(0 0 50px rgba(255,255,255,0.8)); } to { filter: hue-rotate(360deg) drop-shadow(0 0 50px rgba(255,255,255,0.8)); } }

        .float-text {
            position: fixed;
            font-size: 40px;
            font-weight: 900;
            pointer-events: none;
            z-index: 1000;
            animation: floatAnim 1.2s ease-out forwards;
            font-family: 'Black Ops One', cursive;
            text-shadow: 0 0 30px currentColor, 0 0 60px currentColor;
        }
        
        @keyframes floatAnim {
            0% { transform: translate(-50%, 0) scale(0.2) rotate(-30deg); opacity: 0; filter: blur(20px) brightness(5); }
            15% { transform: translate(-50%, -25px) scale(1.5) rotate(15deg); opacity: 1; filter: blur(0) brightness(2); }
            30% { transform: translate(-50%, -50px) scale(1.2) rotate(-8deg); filter: brightness(3); }
            100% { transform: translate(-50%, -150px) scale(0.6) rotate(0deg); opacity: 0; filter: blur(10px); }
        }

        .shockwave {
            position: fixed;
            border: 5px solid;
            border-radius: 50%;
            pointer-events: none;
            z-index: 40;
            animation: shockExpand 0.8s ease-out forwards;
        }
        
        @keyframes shockExpand {
            0% { width: 0; height: 0; opacity: 1; border-width: 10px; box-shadow: 0 0 50px currentColor, inset 0 0 50px currentColor; }
            100% { width: 450px; height: 450px; opacity: 0; }
        }

        .flash {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: 30;
            opacity: 0;
            animation: flashAnim 0.4s ease-out;
        }
        
        @keyframes flashAnim {
            0% { opacity: 1; }
            100% { opacity: 0; }
        }

        .particle {
            position: absolute; 
            pointer-events: none; 
            font-size: 28px;
            z-index: 100;
            animation: fly 1s ease-out forwards;
        }

        @keyframes fly {
            0% { transform: translate(0, 0) rotate(0deg) scale(1); opacity: 1; }
            100% { transform: translate(var(--tx), var(--ty)) rotate(var(--rot)) scale(0.2); opacity: 0; }
        }

        .energy-container {
            position: fixed;
            bottom: 95px;
            left: 50%;
            transform: translateX(-50%);
            width: 280px;
            z-index: 20;
        }
        
        .energy-bar {
            width: 100%;
            height: 12px;
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            overflow: hidden;
            border: 2px solid rgba(255,255,255,0.2);
            box-shadow: 0 0 20px rgba(0,255,65,0.2);
        }
        
        .energy-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--green), var(--cyan));
            border-radius: 20px;
            transition: width 0.3s;
            box-shadow: 0 0 20px var(--green);
        }
        
        .energy-text {
            text-align: center;
            margin-top: 8px;
            font-size: 13px;
            color: #aaa;
            font-weight: 700;
        }

        .auto-ind {
            position: fixed;
            top: 130px;
            right: 15px;
            background: rgba(0,255,65,0.15);
            border: 2px solid var(--green);
            border-radius: 20px;
            padding: 10px 15px;
            font-size: 12px;
            color: var(--green);
            display: none;
            font-weight: 700;
            backdrop-filter: blur(10px);
            box-shadow: 0 0 20px rgba(0,255,65,0.3);
        }
        
        .auto-ind.active {
            display: flex;
            align-items: center;
            gap: 8px;
            animation: autoPulse 2s infinite;
        }
        
        @keyframes autoPulse {
            0%, 100% { box-shadow: 0 0 10px rgba(0,255,65,0.3); }
            50% { box-shadow: 0 0 30px rgba(0,255,65,0.6), 0 0 50px rgba(0,255,65,0.4); }
        }

        .nav { 
            display: grid; 
            grid-template-columns: repeat(5, 1fr); 
            background: linear-gradient(0deg, rgba(0,0,0,0.95) 0%, var(--card) 100%);
            padding: 12px 5px 25px; 
            border-top: 2px solid #30363d;
            position: fixed;
            bottom: 0;
            width: 100%;
            z-index: 50;
        }
        
        .nav-btn { 
            background: none; 
            border: none; 
            color: #8b949e; 
            cursor: pointer; 
            transition: all 0.3s; 
            font-size: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            font-weight: 700;
        }
        
        .nav-btn svg { 
            width: 26px; 
            height: 26px;
            transition: all 0.3s;
        }
        
        .nav-btn.active { 
            color: var(--neon); 
            text-shadow: 0 0 20px var(--neon);
        }
        
        .nav-btn.active svg {
            filter: drop-shadow(0 0 10px var(--neon));
            transform: translateY(-5px) scale(1.15);
        }

        .modal {
            position: fixed; 
            bottom: -100%; 
            left: 0; 
            width: 100%; 
            height: 85%;
            background: linear-gradient(180deg, #1c2128 0%, #0d1117 100%);
            border-radius: 30px 30px 0 0; 
            transition: 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 100; 
            padding: 25px 20px;
            overflow-y: auto;
            border-top: 3px solid var(--green);
            box-shadow: 0 -20px 60px rgba(0,255,65,0.2);
        }
        
        .modal.open { bottom: 0; }
        
        .swipe-bar { 
            width: 60px; 
            height: 6px; 
            background: #444; 
            border-radius: 10px; 
            margin: 0 auto 25px; 
            cursor: pointer;
        }
        
        .modal-header { 
            display: flex; 
            justify-content: space-between; 
            align-items: center;
            margin-bottom: 25px;
        }
        
        .modal-title { 
            font-size: 26px; 
            color: var(--green); 
            display: flex; 
            align-items: center; 
            gap: 12px;
            font-weight: 900;
            text-shadow: 0 0 20px var(--green);
        }
        
        .close-btn { 
            background: rgba(255,255,255,0.1); 
            border: none; 
            color: white; 
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }
        
        .close-btn:hover {
            background: rgba(255,0,0,0.3);
            transform: rotate(90deg);
        }

        .upgrade-card {
            background: linear-gradient(135deg, #21262d 0%, #161b22 100%);
            padding: 20px; 
            border-radius: 20px; 
            margin-bottom: 12px;
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            border: 1px solid #30363d;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .upgrade-card::before {
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            transition: left 0.6s;
        }
        
        .upgrade-card:hover::before {
            left: 100%;
        }
        
        .upgrade-card:hover {
            border-color: var(--green);
            transform: translateX(8px);
            box-shadow: 0 10px 40px rgba(0,255,65,0.2);
        }
        
        .upgrade-info h4 {
            color: white;
            font-size: 16px;
            margin-bottom: 6px;
            font-weight: 700;
        }
        
        .upgrade-info small {
            color: #8b949e;
            font-size: 12px;
        }
        
        .upgrade-card button { 
            background: linear-gradient(135deg, var(--green), #00aa00);
            border: none; 
            color: black; 
            padding: 12px 20px; 
            border-radius: 12px; 
            font-weight: 900;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 0 20px rgba(0,255,65,0.3);
            white-space: nowrap;
        }
        
        .upgrade-card button:hover:not(:disabled) {
            transform: scale(1.08);
            box-shadow: 0 0 40px rgba(0,255,65,0.5);
        }
        
        .upgrade-card button:disabled {
            background: #333;
            color: #666;
            cursor: not-allowed;
            box-shadow: none;
        }

        .upgrade-card button.owned {
            background: linear-gradient(135deg, var(--gold), #ff8c00);
            color: black;
        }

        .skin-preview { 
            font-size: 50px; 
            margin-right: 15px;
            filter: drop-shadow(0 0 10px currentColor);
        }

        .section-title {
            color: var(--gold);
            font-size: 18px;
            font-weight: 900;
            margin: 25px 0 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .stat-box {
            background: rgba(0,255,65,0.1);
            border: 2px solid var(--green);
            border-radius: 20px;
            padding: 20px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 32px;
            font-family: 'Black Ops One', cursive;
            color: var(--gold);
            text-shadow: 0 0 20px var(--gold);
        }
        
        .stat-label {
            color: #8b949e;
            font-size: 12px;
            margin-top: 5px;
        }

        .progress-container {
            background: #333;
            height: 8px;
            border-radius: 10px;
            overflow: hidden;
            margin-top: 10px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--green), var(--cyan));
            border-radius: 10px;
            transition: width 0.5s;
            box-shadow: 0 0 10px var(--green);
        }

        .toast {
            position: fixed;
            top: 50%; 
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.95);
            padding: 25px 40px;
            border-radius: 20px;
            border: 3px solid var(--green);
            color: var(--green);
            font-size: 20px;
            font-weight: 900;
            z-index: 1000;
            display: none;
            text-align: center;
            box-shadow: 0 0 60px rgba(0,255,65,0.5);
            font-family: 'Black Ops One', cursive;
        }
        
        .toast.show { display: block; animation: toastPop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        
        @keyframes toastPop {
            0% { transform: translate(-50%, -50%) scale(0) rotate(-10deg); opacity: 0; }
            70% { transform: translate(-50%, -50%) scale(1.1) rotate(3deg); }
            100% { transform: translate(-50%, -50%) scale(1) rotate(0deg); opacity: 1; }
        }

        .leader-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            margin-bottom: 10px;
            border: 1px solid #30363d;
        }
        
        .leader-rank {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            font-size: 16px;
        }
        
        .rank-1 { background: linear-gradient(135deg, #ffd700, #ff8c00); color: black; }
        .rank-2 { background: linear-gradient(135deg, #c0c0c0, #808080); color: black; }
        .rank-3 { background: linear-gradient(135deg, #cd7f32, #8b4513); color: white; }
        .rank-other { background: #333; color: #aaa; }

        .ref-code {
            background: rgba(0,255,65,0.1);
            border: 2px dashed var(--green);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            margin: 20px 0;
        }
        
        .ref-code-text {
            font-size: 24px;
            font-weight: 900;
            color: var(--green);
            letter-spacing: 3px;
            text-shadow: 0 0 20px var(--green);
        }

        .bonus-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .bonus-card {
            background: linear-gradient(135deg, #21262d 0%, #161b22 100%);
            border: 2px solid #30363d;
            border-radius: 20px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s;
        }
        
        .bonus-card:hover {
            border-color: var(--gold);
            transform: translateY(-5px);
        }
        
        .bonus-card.disabled {
            opacity: 0.5;
            border-color: #333;
        }
        
        .bonus-icon {
            font-size: 40px;
            margin-bottom: 10px;
        }
        
        .bonus-amount {
            font-size: 24px;
            font-weight: 900;
            color: var(--gold);
            text-shadow: 0 0 20px var(--gold);
            margin-bottom: 5px;
        }
        
        .bonus-timer {
            font-size: 11px;
            color: #666;
            margin-top: 8px;
        }
        
        .bonus-btn {
            width: 100%;
            padding: 10px;
            margin-top: 10px;
            background: linear-gradient(135deg, var(--gold), #ff8c00);
            border: none;
            border-radius: 10px;
            color: black;
            font-weight: 900;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .bonus-btn:hover:not(:disabled) {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(255,215,0,0.5);
        }
        
        .bonus-btn:disabled {
            background: #333;
            color: #666;
            cursor: not-allowed;
        }

        .streak-container {
            background: linear-gradient(135deg, rgba(255,0,0,0.2), rgba(255,100,0,0.2));
            border: 2px solid var(--red);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .streak-title {
            font-size: 18px;
            font-weight: 900;
            color: var(--red);
            margin-bottom: 10px;
            text-shadow: 0 0 20px var(--red);
        }
        
        .streak-days {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 15px 0;
        }
        
        .streak-day {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            background: #333;
            border: 2px solid #555;
        }
        
        .streak-day.active {
            background: linear-gradient(135deg, var(--gold), #ff8c00);
            color: black;
            border-color: var(--gold);
            box-shadow: 0 0 20px var(--gold);
        }
        
        .streak-day.current {
            animation: pulse 1s infinite;
            border-color: var(--red);
        }

        .daily-status {
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 15px;
            text-align: center;
            font-weight: 700;
        }
        
        .daily-status.ready {
            background: rgba(0,255,65,0.2);
            border: 2px solid var(--green);
            color: var(--green);
            animation: pulse 2s infinite;
        }
        
        .daily-status.waiting {
            background: rgba(255,0,0,0.1);
            border: 2px solid var(--red);
            color: var(--red);
        }

        .timer-big {
            font-size: 28px;
            font-family: 'Black Ops One', cursive;
            margin-top: 10px;
        }

        /* –ò–°–ü–†–ê–í–õ–ï–ù–ù–û–ï –ö–û–õ–ï–°–û –§–û–†–¢–£–ù–´ */
        .wheel-section {
            background: linear-gradient(135deg, rgba(255,0,255,0.1), rgba(0,0,0,0.3));
            border: 2px solid var(--purple);
            border-radius: 25px;
            padding: 25px;
            margin: 20px 0;
            text-align: center;
        }

        .wheel-title {
            font-size: 22px;
            font-weight: 900;
            color: var(--purple);
            text-shadow: 0 0 20px var(--purple);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .wheel-container {
            position: relative;
            width: 280px;
            height: 280px;
            margin: 0 auto 20px;
        }

        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: relative;
            transition: transform 0.1s;
            box-shadow: 0 0 50px rgba(255,0,255,0.5), inset 0 0 50px rgba(0,0,0,0.5);
            border: 8px solid var(--gold);
            overflow: hidden;
        }

        .wheel-item {
            position: absolute;
            width: 50%;
            height: 50%;
            transform-origin: 100% 100%;
            left: 0;
            top: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            font-size: 16px;
            border: 2px solid rgba(0,0,0,0.3);
            box-sizing: border-box;
        }

        .wheel-item span {
            position: absolute;
            left: 60%;
            top: 40%;
            transform: translate(-50%, -50%) rotate(22.5deg);
            text-shadow: 0 0 10px rgba(0,0,0,0.9);
            white-space: nowrap;
        }

        .wheel-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 70px;
            height: 70px;
            background: radial-gradient(circle, #fff 0%, var(--gold) 100%);
            border: 5px solid #fff;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 35px;
            z-index: 10;
            box-shadow: 0 0 30px rgba(255,215,0,0.8);
            animation: pulse 1s infinite;
        }

        .wheel-arrow {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 20px solid transparent;
            border-right: 20px solid transparent;
            border-top: 40px solid var(--red);
            z-index: 20;
            filter: drop-shadow(0 0 15px var(--red));
            animation: arrowPulse 0.5s infinite alternate;
        }

        @keyframes arrowPulse {
            from { transform: translateX(-50%) scale(1); }
            to { transform: translateX(-50%) scale(1.2); }
        }

        .wheel-spin-btn {
            width: 100%;
            padding: 18px;
            font-size: 18px;
            font-weight: 900;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .wheel-spin-btn.ready {
            background: linear-gradient(135deg, var(--purple), #9400d3);
            color: white;
            box-shadow: 0 0 30px rgba(255,0,255,0.5);
            animation: glow 2s infinite;
        }

        .wheel-spin-btn.ready:hover {
            transform: scale(1.05);
            box-shadow: 0 0 50px rgba(255,0,255,0.8);
        }

        .wheel-spin-btn.waiting {
            background: #333;
            color: #666;
            cursor: not-allowed;
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 20px rgba(255,0,255,0.5); }
            50% { box-shadow: 0 0 40px rgba(255,0,255,0.8), 0 0 60px rgba(255,0,255,0.4); }
        }

        .wheel-result {
            margin-top: 15px;
            font-size: 24px;
            font-weight: 900;
            min-height: 30px;
            text-shadow: 0 0 20px currentColor;
        }

        .wheel-timer {
            color: #888;
            font-size: 13px;
            margin-top: 10px;
        }

        .promo-section {
            background: linear-gradient(135deg, rgba(0,255,255,0.1), rgba(0,0,0,0.3));
            border: 2px solid var(--cyan);
            border-radius: 20px;
            padding: 20px;
            margin: 20px 0;
        }

        .promo-title {
            font-size: 18px;
            font-weight: 900;
            color: var(--cyan);
            margin-bottom: 15px;
            text-align: center;
            text-shadow: 0 0 15px var(--cyan);
        }

        .promo-input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .promo-input {
            flex: 1;
            padding: 15px;
            background: rgba(0,0,0,0.5);
            border: 2px solid #444;
            border-radius: 12px;
            color: white;
            font-size: 16px;
            text-align: center;
            font-weight: 700;
            text-transform: uppercase;
            transition: all 0.3s;
        }

        .promo-input:focus {
            outline: none;
            border-color: var(--cyan);
            box-shadow: 0 0 20px rgba(0,255,255,0.3);
        }

        .promo-btn {
            padding: 15px 25px;
            background: linear-gradient(135deg, var(--cyan), #008b8b);
            border: none;
            border-radius: 12px;
            color: black;
            font-weight: 900;
            cursor: pointer;
            transition: all 0.3s;
        }

        .promo-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(0,255,255,0.5);
        }

        .promo-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
        }

        .promo-tag {
            padding: 8px 15px;
            background: rgba(0,255,65,0.2);
            border: 1px solid var(--green);
            border-radius: 20px;
            font-size: 12px;
            color: var(--green);
        }

        .promo-hint {
            color: #666;
            font-size: 11px;
            text-align: center;
            margin-top: 10px;
        }
    </style>
</head>
<body>

<div class="bg-glow"></div>

<div class="header">
    <div class="league" id="rank">ü•í ROOKIE</div>
    <div class="balance-container">
        <span style="font-size: 40px;">ü•í</span>
        <span id="balance">0</span>
    </div>
    <div class="profit-val">
        <i data-lucide="zap" style="width:14px;height:14px;display:inline;vertical-align:middle;"></i>
        –î–æ—Ö–æ–¥: +<span id="p-val">0</span>/—á–∞—Å | –¢–∞–ø: x<span id="tapPower">1</span>
    </div>
</div>

<div class="game-area">
    <div class="main-cucumber" id="cucumber" onclick="tap(event)">ü•í</div>
</div>

<div class="combo" id="combo">x1</div>

<div class="auto-ind" id="autoInd">
    <i data-lucide="bot" style="width:16px;height:16px;"></i>
    <span>+<span id="autoRate">0</span>/—Å–µ–∫</span>
</div>

<div class="energy-container">
    <div class="energy-bar">
        <div class="energy-fill" id="energyFill"></div>
    </div>
    <div class="energy-text" id="energyText">‚ö° –≠–ù–ï–†–ì–ò–Ø: 1000 / 1000</div>
</div>

<div class="nav">
    <button class="nav-btn active" onclick="closeAll()">
        <i data-lucide="swords"></i>
        <span>–¢–ê–ü–ê–ô</span>
    </button>
    <button class="nav-btn" onclick="openM('mine')">
        <i data-lucide="pickaxe"></i>
        <span>–ú–ê–ô–ù–ò–ù–ì</span>
    </button>
    <button class="nav-btn" onclick="openM('skins')">
        <i data-lucide="sparkles"></i>
        <span>–°–ö–ò–ù–´</span>
    </button>
    <button class="nav-btn" onclick="openM('earn')">
        <i data-lucide="gift"></i>
        <span>–ë–û–ù–£–°–´</span>
    </button>
    <button class="nav-btn" onclick="openM('stats')">
        <i data-lucide="trophy"></i>
        <span>–¢–û–ü</span>
    </button>
</div>

<!-- –ú–ê–ô–ù–ò–ù–ì -->
<div id="m-mine" class="modal">
    <div class="swipe-bar" onclick="closeAll()"></div>
    <div class="modal-header">
        <div class="modal-title"><i data-lucide="pickaxe" style="width:28px;height:28px;"></i> –ú–ê–ô–ù–ò–ù–ì</div>
        <button class="close-btn" onclick="closeAll()"><i data-lucide="x" style="width:24px;height:24px;"></i></button>
    </div>
    
    <div class="stats-grid">
        <div class="stat-box">
            <div class="stat-value" id="currentProfit">0</div>
            <div class="stat-label">ü•í/—á–∞—Å</div>
        </div>
        <div class="stat-box">
            <div class="stat-value" id="totalSpent">0</div>
            <div class="stat-label">–ü–æ—Ç—Ä–∞—á–µ–Ω–æ</div>
        </div>
    </div>
    
    <div class="section-title">üíß –ë–∞–∑–æ–≤—ã–µ</div>
    <div id="mineBasic"></div>
    
    <div class="section-title">‚ö° –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ</div>
    <div id="mineAdvanced"></div>
    
    <div class="section-title">üî• –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ</div>
    <div id="minePro"></div>
    
    <div class="section-title">üëë –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–µ</div>
    <div id="mineLegend"></div>
</div>

<!-- –°–ö–ò–ù–´ -->
<div id="m-skins" class="modal">
    <div class="swipe-bar" onclick="closeAll()"></div>
    <div class="modal-header">
        <div class="modal-title"><i data-lucide="sparkles" style="width:28px;height:28px;"></i> –°–ö–ò–ù–´</div>
        <button class="close-btn" onclick="closeAll()"><i data-lucide="x" style="width:24px;height:24px;"></i></button>
    </div>
    <div id="skinsList"></div>
</div>

<!-- –ë–û–ù–£–°–´ -->
<div id="m-earn" class="modal">
    <div class="swipe-bar" onclick="closeAll()"></div>
    <div class="modal-header">
        <div class="modal-title"><i data-lucide="gift" style="width:28px;height:28px;"></i> –ë–û–ù–£–°–´</div>
        <button class="close-btn" onclick="closeAll()"><i data-lucide="x" style="width:24px;height:24px;"></i></button>
    </div>
    
    <!-- –°—Ç—Ä–∏–∫ -->
    <div class="streak-container">
        <div class="streak-title">üî• –°–¢–†–ò–ö –ó–ê–•–û–î–û–í</div>
        <div class="streak-days" id="streakDays">
            <div class="streak-day">1</div>
            <div class="streak-day">2</div>
            <div class="streak-day">3</div>
            <div class="streak-day">4</div>
            <div class="streak-day">5</div>
            <div class="streak-day">6</div>
            <div class="streak-day">7</div>
        </div>
        <div style="color: #aaa; font-size: 12px;">–ó–∞—Ö–æ–¥–∏—Ç–µ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã—Ö –Ω–∞–≥—Ä–∞–¥!</div>
        <div id="streakReward" style="color: var(--gold); font-weight: 900; margin-top: 10px;"></div>
    </div>

    <!-- –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å -->
    <div class="section-title">üéÅ –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å</div>
    <div id="dailyStatus" class="daily-status waiting">
        <div id="dailyStatusText">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        <div class="timer-big" id="dailyTimerBig">--:--:--</div>
    </div>
    
    <div class="upgrade-card" style="flex-direction: column; text-align: center;">
        <div style="font-size: 64px; margin-bottom: 10px;">üéÅ</div>
        <div style="font-size: 32px; color: var(--gold); font-weight: 900; margin-bottom: 10px;" id="dailyAmount">+1,000 ü•í</div>
        <button onclick="claimDaily()" id="dailyBtn" style="width: 100%; padding: 15px; font-size: 16px;">–ü—Ä–æ–≤–µ—Ä–∫–∞...</button>
        <div style="color: #666; margin-top: 10px; font-size: 11px;">–ö—É–ª–¥–∞—É–Ω: 23 —á–∞—Å–∞</div>
    </div>

    <!-- –ö–û–õ–ï–°–û –§–û–†–¢–£–ù–´ - –ò–°–ü–†–ê–í–õ–ï–ù–ù–û–ï -->
    <div class="wheel-section">
        <div class="wheel-title">
            <span>üé∞</span>
            <span>–ö–û–õ–ï–°–û –§–û–†–¢–£–ù–´</span>
            <span>üé∞</span>
        </div>
        
        <div class="wheel-container">
            <div class="wheel-arrow"></div>
            <div class="wheel" id="fortuneWheel">
                <!-- 8 —Å–µ–≥–º–µ–Ω—Ç–æ–≤ —Å –ø—Ä–∏–∑–∞–º–∏ -->
                <div class="wheel-item" style="background: #ff0040; transform: rotate(0deg);"><span>100</span></div>
                <div class="wheel-item" style="background: #00ff41; transform: rotate(45deg);"><span>1K</span></div>
                <div class="wheel-item" style="background: #00ffff; transform: rotate(90deg);"><span>5K</span></div>
                <div class="wheel-item" style="background: #ffd700; transform: rotate(135deg);"><span>10K</span></div>
                <div class="wheel-item" style="background: #ff8c00; transform: rotate(180deg);"><span>50K</span></div>
                <div class="wheel-item" style="background: #ff00ff; transform: rotate(225deg);"><span>100K</span></div>
                <div class="wheel-item" style="background: #9400d3; transform: rotate(270deg);"><span>150K</span></div>
                <div class="wheel-item" style="background: #ffffff; transform: rotate(315deg);"><span style="color: #000;">500K</span></div>
            </div>
            <div class="wheel-center">ü•í</div>
        </div>
        
        <button onclick="spinWheel()" id="wheelBtn" class="wheel-spin-btn waiting">
            –ó–ê–ì–†–£–ó–ö–ê...
        </button>
        
        <div class="wheel-result" id="wheelResult"></div>
        <div class="wheel-timer" id="wheelTimer"></div>
    </div>

    <!-- –ü–†–û–ú–û–ö–û–î–´ -->
    <div class="promo-section">
        <div class="promo-title">üé´ –ü–†–û–ú–û–ö–û–î–´</div>
        <div class="promo-input-group">
            <input type="text" class="promo-input" id="promoInput" placeholder="–í–í–ï–î–ò–¢–ï –ö–û–î">
            <button class="promo-btn" onclick="checkPromo()">OK</button>
        </div>
        <div class="promo-list" id="promoList"></div>
        <div class="promo-hint">–ü–æ–ø—Ä–æ–±—É–π—Ç–µ: CUCUMBER2024, START, PRO, MAX, SECRET</div>
    </div>

    <!-- –ü–æ—á–∞—Å–æ–≤—ã–µ –±–æ–Ω—É—Å—ã -->
    <div class="section-title">‚è∞ –ë–æ–Ω—É—Å—ã –∫–∞–∂–¥—ã–µ 3 —á–∞—Å–∞</div>
    <div class="bonus-grid" id="hourlyBonuses">
        <div class="bonus-card" id="bonus3h">
            <div class="bonus-icon">‚è∞</div>
            <div class="bonus-amount">+500 ü•í</div>
            <div style="font-size: 11px; color: #888;">3 —á–∞—Å–∞</div>
            <button class="bonus-btn" onclick="claimHourly(3, 500)" id="btn3h">–ó–ê–ë–†–ê–¢–¨</button>
            <div class="bonus-timer" id="timer3h"></div>
        </div>
        <div class="bonus-card" id="bonus6h">
            <div class="bonus-icon">‚ö°</div>
            <div class="bonus-amount">+1,500 ü•í</div>
            <div style="font-size: 11px; color: #888;">6 —á–∞—Å–æ–≤</div>
            <button class="bonus-btn" onclick="claimHourly(6, 1500)" id="btn6h">–ó–ê–ë–†–ê–¢–¨</button>
            <div class="bonus-timer" id="timer6h"></div>
        </div>
        <div class="bonus-card" id="bonus12h">
            <div class="bonus-icon">üî•</div>
            <div class="bonus-amount">+5,000 ü•í</div>
            <div style="font-size: 11px; color: #888;">12 —á–∞—Å–æ–≤</div>
            <button class="bonus-btn" onclick="claimHourly(12, 5000)" id="btn12h">–ó–ê–ë–†–ê–¢–¨</button>
            <div class="bonus-timer" id="timer12h"></div>
        </div>
        <div class="bonus-card" id="bonus23h">
            <div class="bonus-icon">üëë</div>
            <div class="bonus-amount">+15,000 ü•í</div>
            <div style="font-size: 11px; color: #888;">23 —á–∞—Å–∞</div>
            <button class="bonus-btn" onclick="claimHourly(23, 15000)" id="btn23h">–ó–ê–ë–†–ê–¢–¨</button>
            <div class="bonus-timer" id="timer23h"></div>
        </div>
    </div>
    
    <div class="section-title">üìã –ó–∞–¥–∞–Ω–∏—è</div>
    <div id="tasksList"></div>
    
    <div class="section-title">üë• –†–µ—Ñ–µ—Ä–∞–ª—ã</div>
    <div class="ref-code">
        <div style="color: #aaa; font-size: 12px; margin-bottom: 10px;">–í–ê–® –ö–û–î</div>
        <div class="ref-code-text" id="refCode">CUCU123</div>
        <div style="color: var(--green); margin-top: 10px; font-size: 14px;">+5,000 ü•í –∑–∞ –¥—Ä—É–≥–∞ (–º–∞–∫—Å 10)</div>
    </div>
    <div id="friendStatus" style="text-align: center; color: #666; font-size: 12px; margin-bottom: 10px;">
        –ü—Ä–∏–≥–ª–∞—à–µ–Ω–æ: <span id="friendsCount">0</span>/10
    </div>
    <button onclick="inviteFriend()" id="inviteBtn" style="width: 100%; padding: 15px; background: linear-gradient(135deg, var(--purple), #9400d3); border: none; border-radius: 12px; color: white; font-weight: 900; cursor: pointer;">
        –ü–†–ò–ì–õ–ê–°–ò–¢–¨ –î–†–£–ì–ê
    </button>
</div>

<!-- –¢–û–ü -->
<div id="m-stats" class="modal">
    <div class="swipe-bar" onclick="closeAll()"></div>
    <div class="modal-header">
        <div class="modal-title"><i data-lucide="trophy" style="width:28px;height:28px;"></i> –¢–û–ü –ò–ì–†–û–ö–û–í</div>
        <button class="close-btn" onclick="closeAll()"><i data-lucide="x" style="width:24px;height:24px;"></i></button>
    </div>
    
    <div class="stats-grid">
        <div class="stat-box">
            <div class="stat-value" id="totalTaps">0</div>
            <div class="stat-label">–í—Å–µ–≥–æ —Ç–∞–ø–æ–≤</div>
        </div>
        <div class="stat-box">
            <div class="stat-value" id="myRank">#--</div>
            <div class="stat-label">–í–∞—à —Ä–∞–Ω–≥</div>
        </div>
    </div>
    
    <div class="section-title">üèÜ –õ–∏–¥–µ—Ä—ã</div>
    <div id="leaderboard"></div>
    
    <div class="section-title">üí∏ –í—ã–≤–æ–¥</div>
    <div class="upgrade-card" onclick="withdraw()">
        <div>
            <b style="color: var(--gold);">–í—ã–≤–µ—Å—Ç–∏ –Ω–∞ TON</b><br>
            <small>–ú–∏–Ω–∏–º—É–º: 50,000,000 ü•í</small>
        </div>
        <i data-lucide="arrow-right-circle" style="width:28px;height:28px;color:var(--gold);"></i>
    </div>
</div>

<div class="toast" id="toast"></div>

<script>
    lucide.createIcons();

    // –ë–ê–ó–ê –î–ê–ù–ù–´–•
    const upgradesDB = {
        basic: [
            { id: 'b1', name: 'üíß –ö–∞–ø–µ–ª—å–Ω—ã–π –ø–æ–ª–∏–≤', desc: '+50 ü•í/—á–∞—Å', cost: 500, profit: 50 },
            { id: 'b2', name: 'üå± –£–¥–æ–±—Ä–µ–Ω–∏—è NPK', desc: '+120 ü•í/—á–∞—Å', cost: 1200, profit: 120 },
            { id: 'b3', name: '‚òÄÔ∏è UV-–ª–∞–º–ø—ã', desc: '+250 ü•í/—á–∞—Å', cost: 2500, profit: 250 },
            { id: 'b4', name: 'ü™¥ –ì–æ—Ä—à–∫–∏ –ø—Ä–µ–º–∏—É–º', desc: '+400 ü•í/—á–∞—Å', cost: 4000, profit: 400 },
            { id: 'b5', name: 'üå°Ô∏è –ö–ª–∏–º–∞—Ç-–∫–æ–Ω—Ç—Ä–æ–ª—å', desc: '+600 ü•í/—á–∞—Å', cost: 6000, profit: 600 }
        ],
        advanced: [
            { id: 'a1', name: 'ü§ñ –ê–≤—Ç–æ-–ø–æ–ª–∏–≤ AI', desc: '+1,000 ü•í/—á–∞—Å', cost: 10000, profit: 1000 },
            { id: 'a2', name: '‚ö° –ì–∏–¥—Ä–æ–ø–æ–Ω–∏–∫–∞', desc: '+1,500 ü•í/—á–∞—Å', cost: 15000, profit: 1500 },
            { id: 'a3', name: 'üß¨ –ì–ú–û-—Å–µ–º–µ–Ω–∞', desc: '+2,200 ü•í/—á–∞—Å', cost: 22000, profit: 2200 },
            { id: 'a4', name: 'üöÄ –£—Å–∫–æ—Ä–∏—Ç–µ–ª—å —Ä–æ—Å—Ç–∞', desc: '+3,000 ü•í/—á–∞—Å', cost: 30000, profit: 3000 },
            { id: 'a5', name: 'üî¨ –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è', desc: '+4,000 ü•í/—á–∞—Å', cost: 40000, profit: 4000 }
        ],
        pro: [
            { id: 'p1', name: 'üè≠ –§–∞–±—Ä–∏–∫–∞ –æ–≥—É—Ä—Ü–æ–≤', desc: '+6,000 ü•í/—á–∞—Å', cost: 60000, profit: 6000 },
            { id: 'p2', name: 'üåê –°–µ—Ç—å —Ñ–µ—Ä–º', desc: '+9,000 ü•í/—á–∞—Å', cost: 90000, profit: 9000 },
            { id: 'p3', name: 'üõ∏ –ö–æ—Å–º–∏—á–µ—Å–∫–∞—è —Å—Ç–∞–Ω—Ü–∏—è', desc: '+15,000 ü•í/—á–∞—Å', cost: 150000, profit: 15000 },
            { id: 'p4', name: '‚öõÔ∏è –Ø–¥–µ—Ä–Ω—ã–π —Å–∏–Ω—Ç–µ–∑', desc: '+25,000 ü•í/—á–∞—Å', cost: 250000, profit: 25000 },
            { id: 'p5', name: 'üåå –ü–æ—Ä—Ç–∞–ª –≤ –æ–≥—É—Ä–µ—á–Ω—É—é –≤—Å–µ–ª–µ–Ω–Ω—É—é', desc: '+50,000 ü•í/—á–∞—Å', cost: 500000, profit: 50000 }
        ],
        legend: [
            { id: 'l1', name: 'üëë –û–≥—É—Ä–µ—á–Ω—ã–π —Ç—Ä–æ–Ω', desc: '+100,000 ü•í/—á–∞—Å', cost: 1000000, profit: 100000 },
            { id: 'l2', name: '‚ö° –ë–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è —Å–∏–ª–∞', desc: '+250,000 ü•í/—á–∞—Å', cost: 2500000, profit: 250000 },
            { id: 'l3', name: 'üîÆ –û–≥—É—Ä–µ—á–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞', desc: '+500,000 ü•í/—á–∞—Å', cost: 5000000, profit: 500000 },
            { id: 'l4', name: 'üåü –û–≥—É—Ä–µ—á–Ω–∞—è –∑–≤–µ–∑–¥–∞', desc: '+1,000,000 ü•í/—á–∞—Å', cost: 10000000, profit: 1000000 },
            { id: 'l5', name: 'üíé –û–≥—É—Ä–µ—á–Ω—ã–π –±–æ–≥', desc: '+5,000,000 ü•í/—á–∞—Å', cost: 50000000, profit: 5000000 }
        ]
    };

    const skinsDB = [
        { id: 'default', emoji: 'ü•í', name: '–û–±—ã—á–Ω—ã–π –æ–≥—É—Ä–µ—Ü', price: 0, power: 1, color: '#4caf50' },
        { id: 'fresh', emoji: 'üåø', name: '–°–≤–µ–∂–∏–π', price: 5000, power: 2, color: '#22c55e' },
        { id: 'pickle', emoji: 'ü´ô', name: '–ú–∞—Ä–∏–Ω–æ–≤–∞–Ω–Ω—ã–π', price: 15000, power: 3, color: '#84cc16' },
        { id: 'gold', emoji: 'ü•á', name: '–ó–æ–ª–æ—Ç–æ–π', price: 50000, power: 5, color: '#ffd700' },
        { id: 'crystal', emoji: 'üíé', name: '–ö—Ä–∏—Å—Ç–∞–ª—å–Ω—ã–π', price: 150000, power: 8, color: '#00ffff' },
        { id: 'fire', emoji: 'üî•', name: '–û–≥–Ω–µ–Ω–Ω—ã–π', price: 400000, power: 12, color: '#ff4500' },
        { id: 'ice', emoji: '‚ùÑÔ∏è', name: '–õ–µ–¥—è–Ω–æ–π', price: 800000, power: 15, color: '#00bfff' },
        { id: 'lightning', emoji: '‚ö°', name: '–ì—Ä–æ–º–æ–≤–æ–π', price: 1500000, power: 20, color: '#ffff00' },
        { id: 'cosmic', emoji: 'üåå', name: '–ö–æ—Å–º–∏—á–µ—Å–∫–∏–π', price: 3000000, power: 30, color: '#9400d3' },
        { id: 'crown', emoji: 'üëë', name: '–ö–æ—Ä–æ–ª–µ–≤—Å–∫–∏–π', price: 8000000, power: 50, color: '#ffd700' },
        { id: 'cyber', emoji: 'ü§ñ', name: '–ö–∏–±–µ—Ä-–æ–≥—É—Ä–µ—Ü 2077', price: 20000000, power: 100, color: '#00ff41' },
        { id: 'god', emoji: '‚ö°', name: '–ë–æ–≥ –û–≥—É—Ä—Ü–æ–≤', price: 100000000, power: 500, color: '#ffffff' }
    ];

    const tasksDB = [
        { id: 't1', desc: '–°–¥–µ–ª–∞—Ç—å 100 —Ç–∞–ø–æ–≤', target: 100, reward: 500 },
        { id: 't2', desc: '–°–¥–µ–ª–∞—Ç—å 500 —Ç–∞–ø–æ–≤', target: 500, reward: 2000 },
        { id: 't3', desc: '–°–¥–µ–ª–∞—Ç—å 1,000 —Ç–∞–ø–æ–≤', target: 1000, reward: 5000 },
        { id: 't4', desc: '–°–¥–µ–ª–∞—Ç—å 5,000 —Ç–∞–ø–æ–≤', target: 5000, reward: 25000 },
        { id: 't5', desc: '–°–¥–µ–ª–∞—Ç—å 10,000 —Ç–∞–ø–æ–≤', target: 10000, reward: 60000 },
        { id: 't6', desc: '–°–¥–µ–ª–∞—Ç—å 50,000 —Ç–∞–ø–æ–≤', target: 50000, reward: 400000 },
        { id: 't7', desc: '–°–¥–µ–ª–∞—Ç—å 100,000 —Ç–∞–ø–æ–≤', target: 100000, reward: 1000000 },
        { id: 't8', desc: '–ö—É–ø–∏—Ç—å 5 —É–ª—É—á—à–µ–Ω–∏–π', target: 5, reward: 10000, type: 'upgrades' },
        { id: 't9', desc: '–ö—É–ø–∏—Ç—å 10 —É–ª—É—á—à–µ–Ω–∏–π', target: 10, reward: 50000, type: 'upgrades' },
        { id: 't10', desc: '–ó–∞—Ä–∞–±–æ—Ç–∞—Ç—å 100,000 ü•í', target: 100000, reward: 20000, type: 'earn' },
        { id: 't11', desc: '–ó–∞—Ä–∞–±–æ—Ç–∞—Ç—å 1,000,000 ü•í', target: 1000000, reward: 200000, type: 'earn' },
        { id: 't12', desc: '–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å 3 –¥—Ä—É–∑–µ–π', target: 3, reward: 50000, type: 'friends' },
        { id: 't13', desc: '–î–æ—Å—Ç–∏—á—å –∫–æ–º–±–æ x50', target: 50, reward: 30000, type: 'combo' },
        { id: 't14', desc: '–î–æ—Å—Ç–∏—á—å –∫–æ–º–±–æ x100', target: 100, reward: 100000, type: 'combo' },
        { id: 't15', desc: '–ò–≥—Ä–∞—Ç—å 7 –¥–Ω–µ–π', target: 7, reward: 500000, type: 'days' }
    ];

    // –ü—Ä–æ–º–æ–∫–æ–¥—ã
    const promoCodes = {
        'CUCUMBER2024': 10000,
        'START': 5000,
        'PRO': 25000,
        'MAX': 100000,
        'SECRET': 500000
    };

    // –ü—Ä–∏–∑—ã –∫–æ–ª–µ—Å–∞ (–≤ –ø–æ—Ä—è–¥–∫–µ –ø–æ —á–∞—Å–æ–≤–æ–π —Å—Ç—Ä–µ–ª–∫–µ)
    const wheelPrizes = [
        { amount: 100, color: '#ff0040', text: '100', type: 'joke' },
        { amount: 1000, color: '#00ff41', text: '1K', type: 'common' },
        { amount: 5000, color: '#00ffff', text: '5K', type: 'common' },
        { amount: 10000, color: '#ffd700', text: '10K', type: 'rare' },
        { amount: 50000, color: '#ff8c00', text: '50K', type: 'rare' },
        { amount: 100000, color: '#ff00ff', text: '100K', type: 'epic' },
        { amount: 150000, color: '#9400d3', text: '150K', type: 'legendary' },
        { amount: 500000, color: '#ffffff', text: '500K', type: 'mythic' }
    ];

    // GAME STATE
    let bal = parseInt(localStorage.getItem('cb_bal')) || 0;
    let profit = parseInt(localStorage.getItem('cb_profit')) || 0;
    let energy = parseInt(localStorage.getItem('cb_energy')) || 1000;
    let maxEnergy = parseInt(localStorage.getItem('cb_maxEnergy')) || 1000;
    let taps = parseInt(localStorage.getItem('cb_taps')) || 0;
    let currentSkin = localStorage.getItem('cb_skin') || 'default';
    let ownedSkins = JSON.parse(localStorage.getItem('cb_skins')) || ['default'];
    let ownedUpgrades = JSON.parse(localStorage.getItem('cb_upg')) || [];
    let completedTasks = JSON.parse(localStorage.getItem('cb_tasks')) || [];
    let lastDaily = parseInt(localStorage.getItem('cb_daily')) || 0;
    let friends = parseInt(localStorage.getItem('cb_friends')) || 0;
    let spent = parseInt(localStorage.getItem('cb_spent')) || 0;
    let startDay = parseInt(localStorage.getItem('cb_start')) || Date.now();
    let lastHourly = JSON.parse(localStorage.getItem('cb_hourly')) || {3: 0, 6: 0, 12: 0, 23: 0};
    let streak = parseInt(localStorage.getItem('cb_streak')) || 0;
    let lastStreak = parseInt(localStorage.getItem('cb_lastStreak')) || 0;
    let usedPromos = JSON.parse(localStorage.getItem('cb_promos')) || [];
    let lastWheel = parseInt(localStorage.getItem('cb_wheel')) || 0;
    let hasSpunWheel = localStorage.getItem('cb_hasSpun') === 'true';

    let combo = 0;
    let comboTimer = null;
    let lastTap = 0;
    let maxCombo = 0;
    let wheelSpinning = false;
    let currentRotation = 0;

    // –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã
    const DAILY_COOLDOWN = 82800000; // 23 —á–∞—Å–∞
    const WHEEL_COOLDOWN = 82800000; // 23 —á–∞—Å–∞
    const MAX_FRIENDS = 10;

    function save() {
        localStorage.setItem('cb_bal', bal);
        localStorage.setItem('cb_profit', profit);
        localStorage.setItem('cb_energy', energy);
        localStorage.setItem('cb_maxEnergy', maxEnergy);
        localStorage.setItem('cb_taps', taps);
        localStorage.setItem('cb_skin', currentSkin);
        localStorage.setItem('cb_skins', JSON.stringify(ownedSkins));
        localStorage.setItem('cb_upg', JSON.stringify(ownedUpgrades));
        localStorage.setItem('cb_tasks', JSON.stringify(completedTasks));
        localStorage.setItem('cb_daily', lastDaily);
        localStorage.setItem('cb_friends', friends);
        localStorage.setItem('cb_spent', spent);
        localStorage.setItem('cb_hourly', JSON.stringify(lastHourly));
        localStorage.setItem('cb_streak', streak);
        localStorage.setItem('cb_lastStreak', lastStreak);
        localStorage.setItem('cb_promos', JSON.stringify(usedPromos));
        localStorage.setItem('cb_wheel', lastWheel);
        localStorage.setItem('cb_hasSpun', hasSpunWheel);
    }

    function update() {
        document.getElementById('balance').innerText = Math.floor(bal).toLocaleString();
        document.getElementById('p-val').innerText = profit.toLocaleString();
        document.getElementById('tapPower').innerText = skinsDB.find(s => s.id === currentSkin).power;
        document.getElementById('currentProfit').innerText = profit.toLocaleString();
        document.getElementById('totalSpent').innerText = spent.toLocaleString();
        document.getElementById('totalTaps').innerText = taps.toLocaleString();
        document.getElementById('energyFill').style.width = (energy/maxEnergy*100) + '%';
        document.getElementById('energyText').innerText = `‚ö° –≠–ù–ï–†–ì–ò–Ø: ${Math.floor(energy)} / ${maxEnergy}`;
        document.getElementById('friendsCount').innerText = friends;
        
        const autoInd = document.getElementById('autoInd');
        if(profit > 0) {
            autoInd.classList.add('active');
            document.getElementById('autoRate').innerText = Math.floor(profit/3600);
        } else {
            autoInd.classList.remove('active');
        }
        
        // Rank
        const rankEl = document.getElementById('rank');
        if(bal >= 1000000000) rankEl.innerText = 'üëë –ë–û–ì –û–ì–£–†–¶–û–í';
        else if(bal >= 100000000) rankEl.innerText = 'üíé –õ–ï–ì–ï–ù–î–ê';
        else if(bal >= 10000000) rankEl.innerText = 'ü•á –ú–ê–°–¢–ï–†';
        else if(bal >= 1000000) rankEl.innerText = 'ü•à –≠–ö–°–ü–ï–†–¢';
        else if(bal >= 100000) rankEl.innerText = 'ü•â –ü–†–û';
        else if(bal >= 10000) rankEl.innerText = 'üî• –ù–û–í–ò–ß–û–ö+';
        else rankEl.innerText = 'ü•í –ù–û–í–ò–ß–û–ö';
        
        save();
        renderMine();
        renderSkins();
        renderTasks();
        renderLeaderboard();
        checkDaily();
        checkHourly();
        checkWheel();
        updateStreak();
        updateInviteButton();
        renderPromos();
    }

    function showToast(msg) {
        const t = document.getElementById('toast');
        t.innerText = msg;
        t.classList.add('show');
        setTimeout(() => t.classList.remove('show'), 2500);
    }

    // Auto income
    setInterval(() => {
        if(profit > 0) {
            bal += profit/3600;
            update();
        }
    }, 1000);

    // Energy regen
    setInterval(() => {
        if(energy < maxEnergy) {
            energy = Math.min(maxEnergy, energy + 5);
            update();
        }
    }, 1000);

    // TAP
    function tap(e) {
        const now = Date.now();
        if(now - lastTap < 25) return;
        lastTap = now;
        
        if(energy < 1) {
            showFloat(e.clientX, e.clientY, '‚ö° –ù–ï–¢ –≠–ù–ï–†–ì–ò–ò!', '#ff4444');
            return;
        }
        
        energy--;
        taps++;
        
        const skin = skinsDB.find(s => s.id === currentSkin);
        const earned = skin.power;
        bal += earned;
        
        combo++;
        if(combo > maxCombo) maxCombo = combo;
        clearTimeout(comboTimer);
        comboTimer = setTimeout(() => {
            combo = 0;
            document.getElementById('combo').classList.remove('show');
        }, 2500);
        
        showCombo(combo);
        
        const cuc = document.getElementById('cucumber');
        cuc.classList.add('tap');
        setTimeout(() => cuc.classList.remove('tap'), 100);
        
        const color = getComboColor(combo);
        showFloat(e.clientX, e.clientY, '+' + earned, color);
        
        if(combo % 10 === 0) createShockwave(e.clientX, e.clientY, color);
        if(combo % 5 === 0) createFlash(e.clientX, e.clientY, color);
        
        const particleCount = Math.min(20, 3 + Math.floor(combo / 2));
        createParticles(e.clientX, e.clientY, particleCount, color);
        
        checkTasks();
        update();
    }

    function getComboColor(c) {
        if(c >= 100) return 'rainbow';
        if(c >= 50) return '#ff0040';
        if(c >= 25) return '#ffd700';
        if(c >= 10) return '#ff00ff';
        if(c >= 5) return '#00ffff';
        return '#00ff41';
    }

    function showCombo(c) {
        const comboEl = document.getElementById('combo');
        comboEl.innerText = 'x' + c;
        comboEl.className = 'combo';
        
        if(c >= 100) comboEl.classList.add('x100');
        else if(c >= 50) comboEl.classList.add('x50');
        else if(c >= 25) comboEl.classList.add('x25');
        else if(c >= 10) comboEl.classList.add('x10');
        else if(c >= 5) comboEl.classList.add('x5');
        else comboEl.classList.add('x1');
        
        comboEl.classList.add('show');
    }

    function showFloat(x, y, text, color) {
        const el = document.createElement('div');
        el.className = 'float-text';
        el.innerText = text;
        el.style.left = x + 'px';
        el.style.top = y + 'px';
        if(color === 'rainbow') {
            el.style.background = 'linear-gradient(45deg, #ff0000, #ff8000, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff)';
            el.style.webkitBackgroundClip = 'text';
            el.style.webkitTextFillColor = 'transparent';
        } else {
            el.style.color = color;
        }
        document.body.appendChild(el);
        setTimeout(() => el.remove(), 1200);
    }

    function createShockwave(x, y, color) {
        const w = document.createElement('div');
        w.className = 'shockwave';
        w.style.left = (x - 225) + 'px';
        w.style.top = (y - 225) + 'px';
        w.style.borderColor = color === 'rainbow' ? '#ffd700' : color;
        document.body.appendChild(w);
        setTimeout(() => w.remove(), 800);
    }

    function createFlash(x, y, color) {
        const f = document.createElement('div');
        f.className = 'flash';
        const c = color === 'rainbow' ? 'rgba(255,215,0,0.5)' : color + '60';
        f.style.background = `radial-gradient(circle at ${x}px ${y}px, ${c} 0%, transparent 50%)`;
        document.body.appendChild(f);
        setTimeout(() => f.remove(), 400);
    }

    const particlePool = [];
    for(let i = 0; i < 40; i++) {
        const p = document.createElement('div');
        p.className = 'particle';
        p.style.display = 'none';
        document.body.appendChild(p);
        particlePool.push(p);
    }
    let poolIdx = 0;

    function createParticles(x, y, count, color) {
        for(let i = 0; i < count; i++) {
            const p = particlePool[poolIdx];
            poolIdx = (poolIdx + 1) % particlePool.length;
            
            p.style.display = 'block';
            p.innerText = 'ü•í';
            p.style.left = x + 'px';
            p.style.top = y + 'px';
            
            if(color === 'rainbow') {
                p.style.filter = 'hue-rotate(' + (Math.random() * 360) + 'deg)';
            } else {
                p.style.color = color;
                p.style.textShadow = `0 0 15px ${color}`;
            }
            
            p.style.fontSize = (20 + Math.random() * 20) + 'px';
            
            const angle = (Math.PI * 2 / count) * i + Math.random() * 0.8;
            const velocity = 120 + Math.random() * 200;
            const tx = Math.cos(angle) * velocity;
            const ty = Math.sin(angle) * velocity - 150;
            
            p.style.setProperty('--tx', tx + 'px');
            p.style.setProperty('--ty', ty + 'px');
            p.style.setProperty('--rot', (Math.random() * 1080 - 540) + 'deg');
            
            setTimeout(() => {
                p.style.display = 'none';
                p.style.filter = '';
            }, 1000);
        }
    }

    // Modals
    function openM(id) {
        closeAll();
        document.getElementById('m-' + id).classList.add('open');
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        event.currentTarget.classList.add('active');
    }

    function closeAll() {
        document.querySelectorAll('.modal').forEach(m => m.classList.remove('open'));
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        document.querySelector('.nav-btn').classList.add('active');
    }

    // Swipe
    let touchY = 0;
    document.querySelectorAll('.modal').forEach(m => {
        m.addEventListener('touchstart', e => touchY = e.touches[0].clientY);
        m.addEventListener('touchmove', e => {
            if(e.touches[0].clientY - touchY > 100 && m.scrollTop === 0) closeAll();
        });
    });

    // Render functions
    function renderMine() {
        const renderSection = (section, id) => {
            document.getElementById(id).innerHTML = section.map(u => {
                const owned = ownedUpgrades.includes(u.id);
                return `
                    <div class="upgrade-card">
                        <div class="upgrade-info">
                            <h4>${u.name}</h4>
                            <small>${u.desc}</small>
                        </div>
                        ${owned ? 
                            '<button class="owned" disabled>‚úì –ö–£–ü–õ–ï–ù–û</button>' : 
                            `<button onclick="buyUpg('${u.id}', ${u.cost}, ${u.profit})" ${bal < u.cost ? 'disabled' : ''}>
                                ${u.cost.toLocaleString()} ü•í
                            </button>`
                        }
                    </div>
                `;
            }).join('');
        };
        
        renderSection(upgradesDB.basic, 'mineBasic');
        renderSection(upgradesDB.advanced, 'mineAdvanced');
        renderSection(upgradesDB.pro, 'minePro');
        renderSection(upgradesDB.legend, 'mineLegend');
    }

    function buyUpg(id, cost, profitAdd) {
        if(ownedUpgrades.includes(id) || bal < cost) return;
        bal -= cost;
        spent += cost;
        profit += profitAdd;
        ownedUpgrades.push(id);
        showToast('üíé –ö—É–ø–ª–µ–Ω–æ! +' + profitAdd + '/—á–∞—Å');
        update();
    }

    function renderSkins() {
        document.getElementById('skinsList').innerHTML = skinsDB.map(s => {
            const owned = ownedSkins.includes(s.id);
            const active = currentSkin === s.id;
            return `
                <div class="upgrade-card" style="${active ? 'border-color:' + s.color + ';box-shadow:0 0 30px ' + s.color + '40;' : ''}">
                    <div style="display:flex;align-items:center;">
                        <div class="skin-preview" style="${owned ? '' : 'filter:grayscale(1);opacity:0.4;'}">${s.emoji}</div>
                        <div>
                            <h4 style="color:${active ? s.color : 'white'};">${s.name}</h4>
                            <small>–°–∏–ª–∞: x${s.power}</small>
                        </div>
                    </div>
                    ${owned ? 
                        (active ? `<button class="owned" disabled style="background:${s.color};">‚úì –ù–ê–î–ï–¢</button>` : 
                        `<button onclick="equipSkin('${s.id}')" style="background:${s.color};">–ù–ê–î–ï–¢–¨</button>`) :
                        `<button onclick="buySkin('${s.id}', ${s.price})" ${bal < s.price ? 'disabled' : ''} style="background:${s.color};">
                            ${s.price.toLocaleString()} ü•í
                        </button>`
                    }
                </div>
            `;
        }).join('');
    }

    function buySkin(id, price) {
        if(ownedSkins.includes(id) || bal < price) return;
        bal -= price;
        ownedSkins.push(id);
        equipSkin(id);
        showToast('üéâ –°–∫–∏–Ω –∫—É–ø–ª–µ–Ω!');
        update();
    }

    function equipSkin(id) {
        if(!ownedSkins.includes(id)) return;
        currentSkin = id;
        const s = skinsDB.find(x => x.id === id);
        document.getElementById('cucumber').innerText = s.emoji;
        document.getElementById('cucumber').style.filter = `drop-shadow(0 0 40px ${s.color})`;
        showToast(s.name + ' –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω!');
        update();
    }

    function renderTasks() {
        document.getElementById('tasksList').innerHTML = tasksDB.map(t => {
            const done = completedTasks.includes(t.id);
            let progress = 0;
            
            if(t.type === 'upgrades') progress = ownedUpgrades.length;
            else if(t.type === 'earn') progress = Math.floor(bal);
            else if(t.type === 'friends') progress = friends;
            else if(t.type === 'combo') progress = maxCombo;
            else if(t.type === 'days') progress = Math.floor((Date.now() - startDay) / 86400000);
            else progress = taps;
            
            const pct = Math.min(100, progress/t.target*100);
            
            return `
                <div class="upgrade-card" style="${done ? 'opacity:0.5;border-color:var(--green);' : ''}">
                    <div style="flex:1;">
                        <h4>${t.desc}</h4>
                        <div class="progress-container">
                            <div class="progress-fill" style="width:${pct}%;"></div>
                        </div>
                        <small>${Math.min(progress, t.target).toLocaleString()} / ${t.target.toLocaleString()}</small>
                    </div>
                    <div style="color:var(--gold);font-weight:900;font-size:20px;">
                        ${done ? '‚úì' : '+' + t.reward.toLocaleString()}
                    </div>
                </div>
            `;
        }).join('');
    }

    function checkTasks() {
        tasksDB.forEach(t => {
            if(completedTasks.includes(t.id)) return;
            
            let progress = 0;
            if(t.type === 'upgrades') progress = ownedUpgrades.length;
            else if(t.type === 'earn') progress = Math.floor(bal);
            else if(t.type === 'friends') progress = friends;
            else if(t.type === 'combo') progress = maxCombo;
            else if(t.type === 'days') progress = Math.floor((Date.now() - startDay) / 86400000);
            else progress = taps;
            
            if(progress >= t.target) {
                completedTasks.push(t.id);
                bal += t.reward;
                showToast('üèÜ –ó–∞–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ! +' + t.reward.toLocaleString() + ' ü•í');
            }
        });
    }

    function renderLeaderboard() {
        const leaders = [
            { name: '–û–≥—É—Ä–µ—á–Ω—ã–π –ë–æ–≥', score: 999999999999, me: false },
            { name: '–ö–æ—Ä–æ–ª—å –ö—É–∫—É–º–±–µ—Ä–∞', score: 50000000000, me: false },
            { name: '–õ–µ–≥–µ–Ω–¥–∞ –¢–∞–ø–æ–≤', score: 10000000000, me: false },
            { name: '–ú–∞—Å—Ç–µ—Ä –û–≥—É—Ä—Ü–æ–≤', score: 1000000000, me: false },
            { name: '–ü—Ä–æ—Ñ–∏ –§–µ—Ä–º–µ—Ä', score: 100000000, me: false },
            { name: '–í—ã', score: Math.floor(bal), me: true }
        ].sort((a,b) => b.score - a.score);
        
        const myIndex = leaders.findIndex(l => l.me);
        document.getElementById('myRank').innerText = '#' + (myIndex + 1);
        
        document.getElementById('leaderboard').innerHTML = leaders.slice(0, 10).map((l, i) => `
            <div class="leader-item" style="${l.me ? 'border:2px solid var(--gold);' : ''}">
                <div class="leader-rank ${i===0?'rank-1':i===1?'rank-2':i===2?'rank-3':'rank-other'}">${i+1}</div>
                <div style="flex:1;">
                    <div style="font-weight:700;color:${l.me?'var(--gold)':'white'};">${l.name} ${l.me?'üë§':''}</div>
                    <div style="color:#8b949e;font-size:12px;">${l.score.toLocaleString()} ü•í</div>
                </div>
            </div>
        `).join('');
    }

    // ==================== –ï–ñ–ï–î–ù–ï–í–ù–´–ô –ë–û–ù–£–° ====================
    
    function checkDaily() {
        const now = Date.now();
        const btn = document.getElementById('dailyBtn');
        const statusDiv = document.getElementById('dailyStatus');
        const statusText = document.getElementById('dailyStatusText');
        const timerBig = document.getElementById('dailyTimerBig');
        
        const baseReward = 1000;
        const streakBonus = Math.min((streak) * 200, 1400);
        const totalReward = baseReward + streakBonus;
        
        document.getElementById('dailyAmount').innerText = '+' + totalReward.toLocaleString() + ' ü•í';
        
        const timePassed = now - lastDaily;
        const isFirstTime = lastDaily === 0;
        const isReady = isFirstTime || timePassed >= DAILY_COOLDOWN;
        
        if(isReady) {
            btn.disabled = false;
            btn.innerText = isFirstTime ? 'üéÅ –ó–ê–ë–†–ê–¢–¨ –ü–ï–†–í–´–ô –ë–û–ù–£–°!' : `üéÅ –ó–ê–ë–†–ê–¢–¨ ${totalReward.toLocaleString()} ü•í`;
            btn.style.background = 'linear-gradient(135deg, #ff6b6b, #ee5a5a)';
            btn.style.cursor = 'pointer';
            
            statusDiv.className = 'daily-status ready';
            statusText.innerText = '‚úÖ –ë–û–ù–£–° –ì–û–¢–û–í!';
            timerBig.innerText = isFirstTime ? '–ü–µ—Ä–≤—ã–π –≤—Ö–æ–¥ - –±–µ—Å–ø–ª–∞—Ç–Ω–æ!' : '–ó–∞–±–µ—Ä–∏—Ç–µ —Å–µ–π—á–∞—Å';
        } else {
            btn.disabled = true;
            btn.innerText = '‚è≥ –ñ–î–ò–¢–ï';
            btn.style.background = '#333';
            btn.style.cursor = 'not-allowed';
            
            const left = DAILY_COOLDOWN - timePassed;
            const h = Math.floor(left/3600000);
            const m = Math.floor((left%3600000)/60000);
            const s = Math.floor((left%60000)/1000);
            const timeStr = `${h.toString().padStart(2,'0')}:${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
            
            statusDiv.className = 'daily-status waiting';
            statusText.innerText = '‚ùå 23 –ß–ê–°–ê –ï–©–Å –ù–ï –ü–†–û–®–õ–ò!';
            timerBig.innerText = timeStr;
        }
    }

    function claimDaily() {
        const now = Date.now();
        const timePassed = now - lastDaily;
        
        if(lastDaily !== 0 && timePassed < DAILY_COOLDOWN) {
            showToast('‚ùå –ï—â—ë –Ω–µ –ø—Ä–æ—à–ª–æ 23 —á–∞—Å–∞!');
            return;
        }
        
        const dayMs = 86400000;
        if(lastDaily === 0 || timePassed < dayMs * 2) {
            if(lastDaily !== 0) streak++;
        } else {
            streak = 1;
        }
        if(streak > 7) streak = 7;
        
        lastStreak = now;
        lastDaily = now;
        
        const baseReward = 1000;
        const streakBonus = Math.min((streak-1) * 200, 1400);
        const totalReward = baseReward + streakBonus;
        
        bal += totalReward;
        showToast(`üéÅ +${totalReward.toLocaleString()} ü•í –ø–æ–ª—É—á–µ–Ω–æ! (–î–µ–Ω—å ${streak}/7)`);
        update();
    }

    // ==================== –ü–û–ß–ê–°–û–í–´–ï –ë–û–ù–£–°–´ ====================
    
    function checkHourly() {
        const hours = [3, 6, 12, 23];
        hours.forEach(h => {
            const btn = document.getElementById('btn' + h + 'h');
            const timer = document.getElementById('timer' + h + 'h');
            const lastTime = lastHourly[h] || 0;
            const cooldown = h * 3600000;
            const now = Date.now();
            
            if(now - lastTime >= cooldown) {
                btn.disabled = false;
                btn.innerText = '–ó–ê–ë–†–ê–¢–¨';
                btn.style.background = 'linear-gradient(135deg, var(--gold), #ff8c00)';
            } else {
                btn.disabled = true;
                const left = cooldown - (now - lastTime);
                const hh = Math.floor(left/3600000);
                const mm = Math.floor((left%3600000)/60000);
                const ss = Math.floor((left%60000)/1000);
                btn.innerText = '‚è≥';
                btn.style.background = '#333';
                timer.innerText = `${hh}:${mm.toString().padStart(2,'0')}:${ss.toString().padStart(2,'0')}`;
            }
        });
    }

    function claimHourly(hours, amount) {
        const now = Date.now();
        const cooldown = hours * 3600000;
        if(now - (lastHourly[hours] || 0) < cooldown) {
            showToast('‚ùå –ë–æ–Ω—É—Å –µ—â—ë –Ω–µ –≥–æ—Ç–æ–≤!');
            return;
        }
        
        lastHourly[hours] = now;
        bal += amount;
        showToast(`‚è∞ +${amount.toLocaleString()} ü•í –∑–∞ ${hours}—á!`);
        update();
    }

    // ==================== –ö–û–õ–ï–°–û –§–û–†–¢–£–ù–´ ====================
    
    function checkWheel() {
        const now = Date.now();
        const btn = document.getElementById('wheelBtn');
        const timer = document.getElementById('wheelTimer');
        const result = document.getElementById('wheelResult');
        
        const isFirstTime = !hasSpunWheel;
        const timePassed = now - lastWheel;
        const isReady = isFirstTime || timePassed >= WHEEL_COOLDOWN;
        
        if(isReady && !wheelSpinning) {
            btn.disabled = false;
            btn.className = 'wheel-spin-btn ready';
            btn.innerText = isFirstTime ? 'üé∞ –ö–†–£–¢–ò–¢–¨ –ë–ï–°–ü–õ–ê–¢–ù–û!' : 'üé∞ –ö–†–£–¢–ò–¢–¨!';
            timer.innerText = '';
        } else if(wheelSpinning) {
            btn.disabled = true;
            btn.className = 'wheel-spin-btn waiting';
            btn.innerText = '‚è≥ –ö–†–£–¢–ò–ú...';
        } else {
            btn.disabled = true;
            btn.className = 'wheel-spin-btn waiting';
            btn.innerText = '‚è≥ –ö–û–õ–ï–°–û –ù–ï –ì–û–¢–û–í–û';
            
            const left = WHEEL_COOLDOWN - timePassed;
            const h = Math.floor(left/3600000);
            const m = Math.floor((left%3600000)/60000);
            const s = Math.floor((left%60000)/1000);
            timer.innerText = `–°–ª–µ–¥—É—é—â–∞—è –ø–æ–ø—ã—Ç–∫–∞ —á–µ—Ä–µ–∑: ${h}—á ${m}–º ${s}—Å`;
        }
    }

    function spinWheel() {
        if(wheelSpinning) return;
        
        const now = Date.now();
        const isFirstTime = !hasSpunWheel;
        const timePassed = now - lastWheel;
        
        if(!isFirstTime && timePassed < WHEEL_COOLDOWN) {
            showToast('‚ùå –ö–æ–ª–µ—Å–æ –µ—â—ë –Ω–µ –≥–æ—Ç–æ–≤–æ!');
            return;
        }
        
        wheelSpinning = true;
        hasSpunWheel = true;
        lastWheel = now;
        save();
        
        const wheel = document.getElementById('fortuneWheel');
        const resultDiv = document.getElementById('wheelResult');
        const btn = document.getElementById('wheelBtn');
        
        resultDiv.innerText = '';
        btn.innerText = '‚è≥ –ö–†–£–¢–ò–ú...';
        btn.className = 'wheel-spin-btn waiting';
        
        // –í—ã–±–∏—Ä–∞–µ–º –ø—Ä–∏–∑ —Å —É—á–µ—Ç–æ–º —à–∞–Ω—Å–æ–≤
        const random = Math.random() * 100;
        let cumulative = 0;
        let selectedPrize = wheelPrizes[0];
        let selectedIndex = 0;
        
        const chances = [15, 25, 20, 15, 12, 8, 4, 1]; // –®–∞–Ω—Å—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞
        
        for(let i = 0; i < wheelPrizes.length; i++) {
            cumulative += chances[i];
            if(random <= cumulative) {
                selectedPrize = wheelPrizes[i];
                selectedIndex = i;
                break;
            }
        }
        
        // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –≤—Ä–∞—â–µ–Ω–∏–µ
        const segmentAngle = 360 / 8;
        const targetAngle = 360 - (selectedIndex * segmentAngle) - (segmentAngle / 2);
        const spins = 5 + Math.floor(Math.random() * 3);
        const finalAngle = spins * 360 + targetAngle;
        
        // –î–æ–ª–≥–∞—è –∞–Ω–∏–º–∞—Ü–∏—è 6 —Å–µ–∫—É–Ω–¥
        wheel.style.transition = 'transform 6s cubic-bezier(0.25, 0.1, 0.25, 1)';
        wheel.style.transform = `rotate(${finalAngle}deg)`;
        
        // –ê–Ω—Ç–∏—Ü–∏–ø–∞—Ü–∏—è
        setTimeout(() => {
            resultDiv.innerText = '...';
            resultDiv.style.color = '#fff';
        }, 3000);
        
        // –§–∏–Ω–∞–ª
        setTimeout(() => {
            bal += selectedPrize.amount;
            
            if(selectedPrize.type === 'mythic' || selectedPrize.type === 'legendary') {
                resultDiv.style.color = selectedPrize.color;
                resultDiv.innerText = `üî• ${selectedPrize.text} üî•`;
                showToast(`üé∞ –î–ñ–ï–ö–ü–û–¢! +${selectedPrize.amount.toLocaleString()} ü•í!!!`);
                
                for(let i = 0; i < 50; i++) {
                    setTimeout(() => {
                        createParticles(window.innerWidth/2, window.innerHeight/2, 1, selectedPrize.color);
                    }, i * 50);
                }
            } else if(selectedPrize.type === 'joke') {
                resultDiv.style.color = '#ff0040';
                resultDiv.innerText = `üòÖ ${selectedPrize.text}`;
                showToast(`üé∞ –í—ã–ø–∞–ª–æ ${selectedPrize.amount} ü•í... –ü–æ–≤–µ–∑–µ—Ç –≤ —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑!`);
            } else {
                resultDiv.style.color = selectedPrize.color;
                resultDiv.innerText = `‚ú® ${selectedPrize.text} ‚ú®`;
                showToast(`üé∞ +${selectedPrize.amount.toLocaleString()} ü•í!`);
            }
            
            wheelSpinning = false;
            update();
        }, 6000);
    }

    // ==================== –ü–†–û–ú–û–ö–û–î–´ ====================
    
    function checkPromo() {
        const input = document.getElementById('promoInput');
        const code = input.value.toUpperCase().trim();
        
        if(!code) {
            showToast('‚ùå –í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥!');
            return;
        }
        
        if(usedPromos.includes(code)) {
            showToast('‚ùå –ü—Ä–æ–º–æ–∫–æ–¥ —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω!');
            return;
        }
        
        if(promoCodes[code]) {
            const amount = promoCodes[code];
            bal += amount;
            usedPromos.push(code);
            showToast(`üé´ –ü—Ä–æ–º–æ–∫–æ–¥ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω! +${amount.toLocaleString()} ü•í`);
            input.value = '';
            renderPromos();
            update();
        } else {
            showToast('‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥!');
        }
    }

    function renderPromos() {
        const list = document.getElementById('promoList');
        if(usedPromos.length === 0) {
            list.innerHTML = '';
            return;
        }
        
        list.innerHTML = usedPromos.map(p => `
            <div class="promo-tag">‚úì ${p}</div>
        `).join('');
    }

    // ==================== –°–¢–†–ò–ö ====================
    
    function updateStreak() {
        const days = document.getElementById('streakDays').children;
        for(let i = 0; i < 7; i++) {
            days[i].classList.remove('active', 'current');
            if(i < streak) {
                days[i].classList.add('active');
            } else if(i === streak) {
                days[i].classList.add('current');
            }
        }
        
        const rewards = [1000, 1200, 1400, 1600, 1800, 2200, 2400];
        document.getElementById('streakReward').innerText = 
            streak >= 7 ? 'üî• –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–´–ô –°–¢–†–ò–ö! +2400 ü•í/–¥–µ–Ω—å' : 
            `–°–ª–µ–¥—É—é—â–∞—è –Ω–∞–≥—Ä–∞–¥–∞: +${rewards[Math.min(streak, 6)].toLocaleString()} ü•í`;
    }

    // ==================== –†–ï–§–ï–†–ê–õ–´ ====================
    
    function updateInviteButton() {
        const btn = document.getElementById('inviteBtn');
        if(friends >= MAX_FRIENDS) {
            btn.disabled = true;
            btn.innerText = '‚úÖ –õ–ò–ú–ò–¢ –î–û–°–¢–ò–ì–ù–£–¢ (10/10)';
            btn.style.background = '#333';
            btn.style.cursor = 'not-allowed';
        } else {
            btn.disabled = false;
            btn.innerText = '–ü–†–ò–ì–õ–ê–°–ò–¢–¨ –î–†–£–ì–ê';
            btn.style.background = 'linear-gradient(135deg, var(--purple), #9400d3)';
            btn.style.cursor = 'pointer';
        }
    }

    function inviteFriend() {
        if(friends >= MAX_FRIENDS) {
            showToast('‚ùå –õ–∏–º–∏—Ç –¥—Ä—É–∑–µ–π –¥–æ—Å—Ç–∏–≥–Ω—É—Ç (–º–∞–∫—Å 10)');
            return;
        }
        
        if(confirm(`–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–≥–∞?\n\n–ü–æ–ª—É—á–∏—Ç–µ: +5,000 ü•í\n–ü—Ä–æ–≥—Ä–µ—Å—Å: ${friends}/10`)) {
            friends++;
            bal += 5000;
            showToast(`üë• –î—Ä—É–≥ –ø—Ä–∏–≥–ª–∞—à—ë–Ω! +5,000 ü•í (${friends}/10)`);
            update();
        }
    }

    function withdraw() {
        if(bal < 50000000) {
            showToast('‚ùå –ú–∏–Ω–∏–º—É–º 50,000,000 ü•í!');
            return;
        }
        const w = prompt('üíé –í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å TON –∫–æ—à–µ–ª—å–∫–∞:');
        if(w && w.length > 10) {
            showToast('‚úÖ –ó–∞—è–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞! –û–∂–∏–¥–∞–π—Ç–µ –≤—ã–ø–ª–∞—Ç—ã.');
        }
    }

    // ==================== INIT ====================
    
    document.getElementById('cucumber').innerText = skinsDB.find(s => s.id === currentSkin).emoji;
    update();
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
    setInterval(() => {
        checkDaily();
        checkHourly();
        checkWheel();
    }, 1000);
</script>
</body>
</html>
